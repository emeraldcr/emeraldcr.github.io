(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{105:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));const o={isLoading:!1,data:[],isError:!1,total:0}},114:function(t,e,i){"use strict";i.d(e,"b",(function(){return I})),i.d(e,"a",(function(){return R}));var o=i(6),n=i(34),a=i(58),r=i(161),s=i(41),c=i(3),l=i(14),d=i(137),u=i(162);var m=i(4),v=i(169),E=i(69),p=i(72),h={currencies:t=>t.currencies,topCurrencies:t=>t.topCurrencies,experimentCurrencies:t=>t.experimentCurrencies,experimentTopCurrencies:t=>t.experimentTopCurrencies,currency:t=>t.currency,domainLocaleUrls:t=>t.domainLocaleUrls,isMobileDevice:t=>t.isMobileDevice,isTabletDevice:t=>t.isTabletDevice,isWebView:t=>t.isWebView,languageSwitcherPath:t=>t.languageSwitcherPath,locale:t=>t.locale,defaultLocale:t=>t.locale,visitorJWT:t=>t.visitorJWT,shoppingCartMeta:t=>t.shoppingCartMeta,firebaseConfiguration:t=>t.firebaseConfiguration,locales:t=>t.locales,localePath:t=>t.localePath,visitorId:t=>t.visitorId,partnerSession:t=>t.partnerSession,partnerHash:t=>t.partnerSession.partnerHash,gettexts:t=>t.gettexts,defaultGettexts:t=>t.defaultGettexts,assetsCdnUrl:t=>t.assetsCdnUrl,designSystemCdnUrl:t=>t.designSystemCdnUrl,compiledAssetsUrl:t=>t.compiledAssetsUrl,hasAppBanner:t=>t.hasAppBanner,isDevelopment:t=>t.isDevelopment,isProduction:t=>t.isProduction,getCollectorHost:t=>t.collectorHost,topPaymentMethods:t=>t.topPaymentMethods,eventDataSource:t=>t.eventDataSource,geoIpData:t=>t.geoIpData,canonical:t=>t.currentUrl,currentUrl:t=>t.currentUrl,customUtm:t=>t.customUtm,sessionMessage:t=>t.sessionMessage,brandedDomain:t=>t.brandedDomain,debugGettextKeys:t=>t.debugGettextKeys,isRobot:t=>t.isRobot,isSeoPageExperience:t=>t.isSeoPageExperience,userAgent:t=>t.userAgent,shoppingCartExpiration:t=>t.shoppingCartExpiration,currentCurrencyItem:t=>{const{currencies:e=[],currency:i}=t;return e.filter(t=>t.iso===i)[0]||{iso:i}},currentLocaleItem:t=>{const{locales:e=[],locale:i}=t;return e.filter(t=>t.iso===i)[0]||{iso:i}},httpRequest:t=>({currency:t.currency,locale:t.locale,geoIpCountry:t.geoIpData.country,partnerId:t.eventDataSource.partnerId,defaultLocale:t.defaultLocale,httpReferer:t.httpReferer}),mobileDeviceOS:t=>/windows phone/i.test(t.userAgent)?"Windows Phone":/android|Android/i.test(t.userAgent)?"android":/iPad|iPhone|iPod/.test(t.userAgent)?"ios":"unknown"},S=i(9),f=i(170),g={setFirebaseConfiguration:(t,e)=>{t.firebaseConfiguration=Object.freeze(e)},setExternalApiUrls:(t,e)=>{t.externalApiUrls=e},setCurrencies:(t,e)=>{t.currencies=e.sort((t,e)=>t.iso<e.iso?-1:1)},setExperimentCurrencies:(t,e)=>{t.experimentCurrencies=e.sort((t,e)=>t.iso<e.iso?-1:1)},setTopCurrencies:(t,e)=>{t.topCurrencies=e},setExperimentTopCurrencies:(t,e)=>{t.experimentTopCurrencies=e},setCurrentCurrency:(t,e)=>{t.currency=e},setCurrentLocale:(t,e)=>{t.locale=e},setDefaultLocale:(t,e)=>{t.defaultLocale=e},setDomainLocaleUrls:(t,e)=>{t.domainLocaleUrls=Object.freeze(e)},setEventDataSource:(t,{containerName:e,rawEventDataSource:i,opts:o={}})=>{const n=S.a({containerName:e},i,o);t.eventDataSource=Object.freeze(n)},setAllowLoginOnFishfarm:(t,e)=>{t.allowLoginOnFishfarm=e},setAppBannerStatus:(t,e)=>{t.hasAppBanner=e},setDevelopmentEnvironment:(t,e)=>{t.isDevelopment=e},setProductionEnvironment:(t,e)=>{t.isProduction=e},setShouldUseProductionApiOnTestingEnv:(t,e)=>{t.shouldUseProductionApiOnTestingEnv=e},setLanguageSwitcherPath:(t,e)=>{t.languageSwitcherPath=e},setLocales:(t,e)=>{const i=e.filter(t=>t.enabled).sort(e=>e.iso===t.locale?-1:1);t.locales=i},setLocalePath:(t,e)=>{t.localePath=e},setGettexts:(t,e)=>{t.gettexts=S.a({},e)},setDefaultGettexts:(t,e)=>{t.defaultGettexts=S.a({},e)},setPlatform:(t,e)=>{t.platform=e},setMobileDevice:(t,e)=>{t.isMobileDevice=e},setHttpReferer:(t,e)=>{t.httpReferer=e},setTabletDevice:(t,e)=>{t.isTabletDevice=e},setWebView:(t,e)=>{t.isWebView=e},setDesktopDevice:(t,e)=>{t.isDesktopDevice=e},setIsOfficeIp:(t,e)=>{t.isOfficeIp=e},setIsSyntheticRequest:(t,e)=>{t.isSyntheticRequest=e},setIsRobot:(t,e)=>{t.isRobot=e},setIsSeoPageExperience:(t,e)=>{t.isSeoPageExperience=e},setAnonymizedIp:(t,e)=>{t.anonymizedIp=e},setUserAgent:(t,e)=>{t.userAgent=e},setAssetsCdnUrl:(t,e)=>{t.assetsCdnUrl=e},setDesignSystemCdnUrl:(t,e)=>{t.designSystemCdnUrl=e},setCompiledAssetsUrl:(t,e)=>{t.compiledAssetsUrl=e},setVisitorId:(t,e)=>{t.visitorId=e},setPartnerSession:(t,e)=>{t.partnerSession=e},setOs:(t,e)=>{t.os=e},setCustomUtm:(t,e)=>{t.customUtm=e},setCollectorHost:(t,e)=>{t.collectorHost=e},setExperimentationHost:(t,e)=>{t.experimentationHost=e},setExperimentationImpressions:(t,e)=>{t.experimentationImpressions=e},setRecaptchaSiteId:(t,e)=>{t.recaptchaSiteId=e},setVisitorJWT:(t,e)=>{t.visitorJWT=e},setShoppingCartMeta:(t,e)=>{t.shoppingCartMeta=e},setTopPaymentMethods:t=>{const e=new f.a;t.topPaymentMethods=e.getTopPaymentMethods()},setGeoIpData:(t,e)=>{t.geoIpData=Object.freeze(e)},setCurrentUrl:(t,e)=>{t.currentUrl=e},setSessionMessage:(t,e)=>{t.sessionMessage=e},setShoppingCartExpiration:(t,e)=>{e&&new Date(e).getTime()>(new Date).getTime()?t.shoppingCartExpiration=e:t.shoppingCartExpiration=null},setDismissedBroadcast:(t,e)=>{t.dismissBroadcast=e},setTestingEnvBasicAuth:(t,e)=>{t.testingEnvBasicAuth=e},setBrandedDomain:(t,e)=>{t.brandedDomain=e},setDebugGettextKeys:(t,e)=>{t.debugGettextKeys=e},setCSPNonce:(t,e)=>{t.cspNonce=e}};const T=()=>({httpReferer:void 0,allowLoginOnFishfarm:!0,externalApiUrls:null,assetsCdnUrl:"",designSystemCdnUrl:"",containerName:"",compiledAssetsUrl:"",currencies:[],experimentCurrencies:[],currency:"",domainLocaleUrls:{},eventDataSource:{},firebaseConfiguration:{apiKey:"",authDomain:"",databaseURL:"",projectId:"",messagingSenderId:"",appId:""},recaptchaSiteId:"",hasAppBanner:!1,isDevelopment:!1,isProduction:!0,shouldUseProductionApiOnTestingEnv:!1,isMobileDevice:!1,isTabletDevice:!1,isDesktopDevice:!0,isWebView:!1,anonymizedIp:"",platform:"desktop",isOfficeIp:!1,isSyntheticRequest:!1,languageSwitcherPath:"",locales:[],locale:"",localePath:void 0,defaultLocale:"",gettexts:{},defaultGettexts:{},userAgent:"",visitorId:"",partnerSession:{},partnerHash:"",collectorHost:"",experimentationHost:"",experimentationImpressions:!1,visitorJWT:void 0,topCurrencies:[],experimentTopCurrencies:[],topPaymentMethods:[],geoIpData:{},currentUrl:"",os:"",customUtm:[],sessionMessage:void 0,testingEnvBasicAuth:void 0,dismissBroadcast:"",shoppingCartMeta:{},brandedDomain:void 0,debugGettextKeys:!1,isRobot:!1,isSeoPageExperience:!1,shoppingCartExpiration:null,cspNonce:""});function I(t,e){return{namespaced:!0,state:T,getters:h,mutations:g,actions:(i=new m.b(t),S=new v.a(e),f=new E.a(t,e),I=new p.a(t),{changeLocale:({commit:t,state:e},i)=>{t("setCurrentLocale",i);const o=new URLSearchParams;o.set(a.a.currency,e.currency),o.set(a.a.currency,e.currency),o.set(a.a.locale,i),o.set(a.a.visitorId,e.visitorId),o.set(a.a.next,window.location.pathname+window.location.search),o.set(a.a.shoppingCartId,f.getShoppingCartHash()||"");const r=S.getLastClickPartnerSession();r&&o.set(a.a.partnerSession,r);const s=Object(n.a)(o),c=Object(u.a)(window.location.host,e.domainLocaleUrls[i]),l=`${Object(d.a)(window.location.host)?window.location.origin:new URL(c).origin}${e.languageSwitcherPath}?${s}`;window.location.assign(l)},changeCurrency:function(){var t=o.a((function*({commit:t,rootGetters:e},{selectedCurrencyIso:i,enforceGiftCardRemoval:o}){const n=f.getShoppingCartHash();if(n)try{yield I.switchShoppingCartCurrency(n,i,o,e["context/partnerSession"],e["auth/isLoggedIn"])}catch(a){if(404!==a.status)throw a}t("setCurrentCurrency",i)}));return function(e,i){return t.apply(this,arguments)}}(),fetchVisitorJWT:function(){var t=o.a((function*({commit:t,state:e}){if(e.isDevelopment)return"";if(e.visitorJWT)return e.visitorJWT;const{jwt:o}=yield i.generateJwt();return t("setVisitorJWT",o),o}));return function(e){return t.apply(this,arguments)}}(),fetchShoppingCartMeta:function(){var t=o.a((function*({commit:t,state:e}){const i=f.getShoppingCartHash();if(i)try{const o=yield I.getShoppingCartMeta(i);if(!o||Object(r.a)(o.status))f.deleteShoppingCartHashAndExpiryCookie(),t("setShoppingCartExpiration",null);else{t("setShoppingCartMeta",o);const i=o.currencyIsoCode;i&&i!==e.currency&&(c.a.info("Currency mismatch detected on page load [CHK-8786]",{currentCurrencyIso:e.currency,shoppingCartCurrencyIso:i,visitorId:e.visitorId}),l.a.increment("currency_mismatch"),t("setCurrentCurrency",i),Object(s.a)().set("currency",i))}}catch(n){var o;404===(null===n||void 0===n||null===(o=n.response)||void 0===o?void 0:o.status)&&(f.deleteShoppingCartHashAndExpiryCookie(),t("setShoppingCartExpiration",null))}}));return function(e){return t.apply(this,arguments)}}(),clearSessionMessage:({commit:t})=>{t("setSessionMessage",void 0)},setAppBannerStatus:({commit:t},e)=>{t("setAppBannerStatus",e)},setShoppingCartExpiration:({commit:t},e)=>{t("setShoppingCartExpiration",e),S.setShoppingCartExpirationCookie(e)},setFutureSessionMessage:(t,{message:e})=>{S.setSessionMessageCookie(e)},updateBroadcast:({commit:t})=>{t("setDismissedBroadcast",S.getBroadcastCookie())},dismissBroadcast:(t,e)=>{S.setBroadcastCookie(e)}})};var i,S,f,I}function R(t){return{partnerHash:t.partnerHash,cmp:t.campaign,partnerVisitorId:t.partnerVisitorId,partnerSourceId:t.partnerSourceId,showTaBanner:!!t.showTaBanner}}},13:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var o=i(20);const n={setActivitiesData:"setActivitiesData",setIsLoading:"setIsLoading",setLocationData:"setLocationData",setTopLocationsHeader:"setTopLocationsHeader",setRelatedTopLocations:"setRelatedTopLocations",setRelatedLocation:"setRelatedLocation",setCollections:"setCollections",setCategoryNavigation:"setCategoryNavigation",setTopSightsRankingUuid:"setTopSightsRankingUuid",setAttractionTripItemsData:"setAttractionTripItemsData",setNearestLocations:"setNearestLocations",setNearestActivity:"setNearestActivity",setTripItems:"setTripItems",setTripItemGroupCategories:"setTripItemGroupCategories",setTripItemGroupNavigationItems:"setTripItemGroupNavigationItems",setParentLocationData:"setParentLocationData",setLocationOverview:"setLocationOverview",setRecommendations:"setRecommendations",setShowRecommendations:"setShowRecommendations",setInitialCacheState:"setInitialCacheState",setActiveTab:"setActiveTab",setEntryTab:"setEntryTab",setMerchUniqueCollection:"setMerchUniqueCollection"};e.b={[n.setActiveTab](t,e){t.activeTab=e},[n.setEntryTab](t,e){t.entryTab=e},[n.setInitialCacheState](t,e){t.cache=e},[n.setActivitiesData](t,e){t.activitiesData=e,Object(o.c)(t,"activitiesData",e)},[n.setIsLoading](t,e){t.isLoading=e},[n.setLocationData](t,e){t.locationData=e},[n.setTopLocationsHeader](t,e){t.topLocationsHeader=e},[n.setRelatedTopLocations](t,e){t.relatedTopLocations=e,Object(o.c)(t,"relatedTopLocations",e)},[n.setRelatedLocation](t,e){t.relatedLocation=e,Object(o.c)(t,"relatedLocation",e)},[n.setMerchUniqueCollection](t,e){t.merchUniqueCollection=e,Object(o.c)(t,"merchUniqueCollection",e)},[n.setCollections](t,e){const{enrichedItems:i,uid:o}=e;t.collections=i,t.collectionsUid=o},[n.setCategoryNavigation](t,e){t.categoryNavigation=e},[n.setTopSightsRankingUuid](t,e){t.topSightsRankingUuid=e},[n.setAttractionTripItemsData](t,e){t.attractionTripItemsData=e,Object(o.c)(t,"attractionTripItemsData",e)},[n.setNearestLocations](t,e){t.nearestLocations=e||[],Object(o.c)(t,"nearestLocations",e)},[n.setNearestActivity](t,e){t.nearestActivity=e},[n.setTripItems](t,e){t.tripItems=e||[],Object(o.c)(t,"tripItems",e)},[n.setTripItemGroupCategories](t,e){t.tripItemGroupCategories=e||[]},[n.setTripItemGroupNavigationItems](t,e){t.tripItemGroupNavigationItems=e||[]},[n.setParentLocationData](t,e){t.parentLocationData=null!==e&&void 0!==e?e:null},[n.setLocationOverview](t,e){t.locationOverview=e},[n.setRecommendations](t,e){t.recommendations=e},[n.setShowRecommendations](t,e){t.showRecommendations=e}}},136:function(t,e,i){"use strict";i.d(e,"a",(function(){return N}));var o=i(105),n=i(22),a=i(20);const r="activitiesData",s="isLoading",c="locationData",l="topLocationsHeader",d="relatedTopLocations",u="relatedLocation",m="collections",v="collectionsUid",E="categoryNavigation",p="topSightsRankingUuid",h="attractionTripItemsData",S="nearestLocations",f="nearestActivity",g="tripItems",T="tripItemGroupCategories",I="tripItemGroupNavigationItems",R="parentLocationData",_="locationOverview",y="recommendations",A="showRecommendations",O="isCurated",C="activeTab",L="entryTab",D="merchUniqueCollection",N={activitiesData:"location/"+r,isLoading:"location/"+s,locationData:"location/"+c,topLocationsHeader:"location/"+l,relatedTopLocations:"location/"+d,relatedLocation:"location/"+u,collections:"location/"+m,collectionsUid:"location/"+v,categoryNavigation:"location/"+E,topSightsRankingUuid:"location/"+p,attractionTripItemsData:"location/"+h,nearestLocations:"location/"+S,nearestActivity:"location/"+f,tripItems:"location/"+g,tripItemGroupCategories:"location/"+T,tripItemGroupNavigationItems:"location/"+I,parentLocationData:"location/"+R,locationOverview:"location/"+_,recommendations:"location/"+y,showRecommendations:"location/"+A,isCurated:"location/"+O,activeTab:"location/"+C,entryTab:"location/"+L,merchUniqueCollection:"location/"+D};var b,w,P;e.b={[r]:t=>Object(a.a)(t,"activitiesData")?Object(a.b)(t,"activitiesData"):t.activitiesData,[s]:t=>t.isLoading,[c]:t=>t.locationData,[l]:t=>t.topLocationsHeader,[d]:t=>Object(a.a)(t,"relatedTopLocations")?Object(a.b)(t,"relatedTopLocations"):t.relatedTopLocations,[u]:t=>Object(a.a)(t,"relatedLocation")?Object(a.b)(t,"relatedLocation"):t.relatedLocation,[m]:t=>t.collections,[v]:t=>t.collectionsUid,[E]:t=>t.categoryNavigation,[p]:t=>t.topSightsRankingUuid,[h]:t=>Object(a.a)(t,"attractionTripItemsData")?Object(a.b)(t,"attractionTripItemsData"):t.attractionTripItemsData,[S]:t=>Object(a.a)(t,"nearestLocations")?Object(a.b)(t,"nearestLocations"):t.nearestLocations,[f]:t=>null!==(b=t.nearestActivity)&&void 0!==b?b:o.a,[g]:t=>Object(a.a)(t,"tripItems")?Object(a.b)(t,"tripItems"):t.tripItems||[],[T]:t=>t.tripItemGroupCategories||[],[I]:t=>t.tripItemGroupNavigationItems||[],[R]:t=>null!==(w=null===t||void 0===t?void 0:t.parentLocationData)&&void 0!==w?w:null,[_]:t=>t.locationOverview||{},[y]:t=>t.recommendations||{},[A]:t=>t.showRecommendations||!1,[O]:t=>{var e,i;return n.c.includes(null!==(P=null===(e=t.locationData)||void 0===e?void 0:e.id)&&void 0!==P?P:0)&&!(null===(i=t.locationData)||void 0===i?void 0:i.category)},[C]:t=>t.activeTab,[L]:t=>t.entryTab,[D]:t=>Object(a.a)(t,"merchUniqueCollection")?Object(a.b)(t,"merchUniqueCollection"):t.merchUniqueCollection}},142:function(t,e,i){"use strict";var o,n;i.d(e,"a",(function(){return n})),function(t){t[t.Any=0]="Any",t[t.All=1]="All"}(o||(o={})),function(t){t[t.SUCCESS=200]="SUCCESS",t[t.WRONG_PARAMS=400]="WRONG_PARAMS",t[t.SERVICE_UNAVAILABLE=500]="SERVICE_UNAVAILABLE"}(n||(n={}))},144:function(t,e,i){"use strict";i.d(e,"a",(function(){return T})),i.d(e,"b",(function(){return D}));var o=i(9),n=i(6),a=i(32),r=i.n(a),s=i(14),c=i(3),l=i(41),d=i(23),u=i(59),m=i(54),v=i(172),E=i(86),p=i(132),h=i(173),S=i(8),f=i(52),g=i(4);const T={emailAlreadyInUse:"emailAlreadyInUse",noEmailInUserCredential:"noEmailInUserCredential",passwordCreationFailed:"passwordCreationFailed",facebookAccountExists:"facebookAccountExists",facebookEmailExists:"facebookEmailExists",facebookGoogleExists:"facebookGoogleExists",facebookUnknownError:"facebookUnknownError",appleUnknownError:"appleUnknownError",googleUnknownError:"googleUnknownError",invalidEmail:"invalidEmail",tooManyRequests:"tooManyRequests",unknownError:"unknownError",userNotFound:"userNotFound",wrongPassword:"wrongPassword",sendEmailLinkLoginFailed:"sendEmailLinkLoginFailed",expiredActionCode:"invalidActionCode"},I={[T.emailAlreadyInUse]:"auth/email-already-in-use",[T.facebookAccountExists]:"auth/account-exists-with-different-credential",[T.invalidEmail]:"auth/invalid-email",[T.tooManyRequests]:"auth/too-many-requests",[T.userNotFound]:"auth/user-not-found",[T.wrongPassword]:"auth/wrong-password",[T.noEmailInUserCredential]:"noEmailInUserCredential",[T.expiredActionCode]:"auth/expired-action-code"};var R,_;!function(t){t.FIREBASE="firebase",t.TFE="tfe",t.FISHFARM="fishfarm",t.FISHFARM_API="fishfarm-api",t.AUTH="auth"}(R||(R={})),function(t){t.ERROR="error",t.ATTEMPT="attempt",t.SUCCESS="success"}(_||(_={}));const y=Object.values(I);const A=t=>{const e=Object.entries(t).reduce((t,[e,i])=>i?o.a({},t,{[e]:i}):t,{});s.a.increment("authentication",e)},O=(t,e)=>{if(e.type===_.ERROR)if("object"===typeof t){if(e.service===R.FISHFARM_API&&"logout"===e.action)try{c.a.error("[Authentication] FishfarmAPI logout error",{error:{message:JSON.stringify(t)}})}catch(i){c.a.error("[Authentication] FishfarmAPI failed to stringify error")}c.a.error(t,`[Authentication] ${e.service} - ${e.action} - ${e.type}`)}else c.a.error(`[Authentication] ${e.service} - ${e.action} - ${e.type}`,{error:{message:t}})},C=function(){var t=n.a((function*({firebaseConfiguration:t,locale:e}){const{default:o}=yield i.e(43).then(i.bind(null,260));yield o(t,e);const{auth:n}=(yield Promise.all([i.e(1),i.e(3)]).then(i.t.bind(null,259,7))).default;return n}));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=n.a((function*(t){const e=yield C({firebaseConfiguration:t.context.firebaseConfiguration,locale:t.context.locale}),i=e().currentUser;((null===i||void 0===i?void 0:i.providerData)||[]).forEach(t=>{const o=(new e.EmailAuthProvider).providerId;(null===t||void 0===t?void 0:t.providerId)===o&&(null===i||void 0===i||i.unlink(o).then(()=>c.a.info("[EmailAuthProvider Unlinking] Provider unlinked because user logged in with social media"),t=>c.a.error("[EmailAuthProvider Unlinking] Error unlinking Email/Password: "+t)))})}));return function(e){return t.apply(this,arguments)}}();function D(t){return{addError({commit:t},e){t(S.a.ADD_ERROR,e)},cleanErrors({commit:t}){t(S.a.CLEAN_ERRORS)},reset({commit:t,dispatch:e}){e("cleanErrors"),t(S.a.SET_LOADING_STATE,!0)},setLoggedContext({commit:t},e){const{customerData:i,revalidateSession:o}=e,n=i.id;try{n&&(Object(l.a)().set("customerId",n.toString(),{httpOnly:!0}),Object(p.b)(n))}catch(a){s.a.increment("customer_id_set_failed")}t(S.a.SET_IS_LOGGED_IN),t(S.a.SET_CUSTOMER_INFO,i),t(S.a.SET_LOADING_STATE,!1),t(S.a.SET_REVALIDATE_SESSION,o)},setLoginTentative({commit:t}){t(S.a.SET_LOGIN_TENTATIVE)},afterAuthenticated({commit:t,dispatch:e,rootState:i},{nextUri:o="",refreshAfterAuthentication:n,message:a}){t(S.a.CLEAN_ERRORS);const r=document.referrer;"logout"===a&&Object(l.a)().set("disableOneTap","true");const s=t=>t.includes("/404")||t.includes("/login")||t.includes("/signup")||t.includes("/forgot-password")||t.includes("/reset-password");var c;if(a&&e("context/setFutureSessionMessage",{message:a},{root:!0}),"logout"===a&&document.location.pathname.indexOf("/account/")>-1)window.location.href=Object(m.a)(null===(c=i.context)||void 0===c?void 0:c.localePath,"/");else if(o&&function(t=""){try{const e=new URL(t);return Object(v.a)(e)}catch(e){return!1}}(o))window.location.replace(o);else if(!(t=>t.startsWith(window.location.origin+"/"))(r)||s(r)||n)if(n)window.location.reload();else if(Object(h.a)(o||"")&&!s(o))window.location.replace(o);else{var d;window.location.href=Object(m.a)(null===(d=i.context)||void 0===d?void 0:d.localePath,"/"+window.location.search)}else window.location.replace(r)},logout:({commit:e,dispatch:i,rootState:o})=>n.a((function*(){i("reset");const n=yield C({firebaseConfiguration:o.context.firebaseConfiguration,locale:o.context.locale});try{var a;A({action:"logout",type:_.ATTEMPT,service:R.FIREBASE});const i=yield null===(a=n().currentUser)||void 0===a?void 0:a.getIdToken();yield n().signOut().catch(t=>{A({action:"logout",type:_.ERROR,service:R.FIREBASE}),O(t,{action:"logout",type:_.ERROR,service:R.FIREBASE})}),yield t.logout().catch(t=>{A({action:"logout",type:_.ERROR,service:R.TFE,code:"tfeLogout"}),O(t,{action:"logout",type:_.ERROR,service:R.TFE})}),o.context.allowLoginOnFishfarm&&(Object(l.a)().expire("customerId"),yield t.customerLogOut(i).catch(t=>{A({action:"logout",type:_.ERROR,service:R.FISHFARM_API,code:"customerLogOut"}),O(t,{action:"logout",type:_.ERROR,service:R.FISHFARM_API})})),e(S.a.SET_IS_LOGGED_OUT),e(S.a.SET_LOADING_STATE,!1),A({action:g.a.logout,type:_.SUCCESS,service:""})}catch(r){throw e(S.a.SET_LOADING_STATE,!1),e(S.a.ADD_ERROR,T.unknownError),r}}))(),restoreSession:({dispatch:t,rootState:e,state:i})=>n.a((function*(){const{isLoggedIn:o}=i,a=Object(d.a)(t),r=yield C({firebaseConfiguration:e.context.firebaseConfiguration,locale:e.context.locale});return new Promise((i,s)=>{r()||i();const l=r().onAuthStateChanged(function(){var s=n.a((function*(n){const{hasRequestedLoginAction:s}=e.auth;if(!o&&r().currentUser&&!s)return a("notifications/setMessage","loginExpired"),c.a.error({visitorId:e.context.visitorId},"[Authentication] Session expired"),yield t("logout"),l(),i();if(n)try{var d;const e=null===(d=(yield n.getIdTokenResult()).claims)||void 0===d?void 0:d.gygCustomerId,i=null===n||void 0===n?void 0:n.displayName;e&&i&&t("setLoggedContext",{customerData:{displayName:i,id:e}})}catch(u){A({action:"restoreSession/getIdTokenResult",type:_.ERROR,service:R.FIREBASE}),O(u,{action:"restoreSession/getIdTokenResult",type:_.ERROR,service:R.FIREBASE})}return l(),i()}));return function(t){return s.apply(this,arguments)}}(),t=>(a("notifications/setMessage","loginExpired"),A({action:"restoreSession/onAuthStateChanged",type:_.ERROR,service:R.FIREBASE}),O(t,{action:"restoreSession/onAuthStateChanged",type:_.ERROR,service:R.FIREBASE}),s))})}))(),signupWithEmail:({commit:e,dispatch:i,rootState:o},{firstName:a,lastName:r,email:s,password:c,getNewsletter:l,softOptInDisplayed:d})=>n.a((function*(){i("reset");try{var n,m,v;i("setLoginTentative"),A({action:g.a.emailPassword,type:_.ATTEMPT,service:""});const e=yield C({firebaseConfiguration:o.context.firebaseConfiguration,locale:o.context.locale}),u=yield e().createUserWithEmailAndPassword(s,c).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),E=e().currentUser,p=`${a} ${r}`;yield E.updateProfile({displayName:p}).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),o.context.allowLoginOnFishfarm&&(yield t.createCustomerFromLogin({actionOrigin:g.a.emailPassword,customerData:{firstName:a,isSubscribedForNewsletter:l,lastName:r,password:c,locale:o.context.locale},softOptInDisplayed:d}).then(()=>{var t;return null===(t=e().currentUser)||void 0===t?void 0:t.getIdToken(!0)}).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FISHFARM_API,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FISHFARM_API,type:_.ERROR,code:"createCustomerFromLogin"}),t}));const h=yield null===(n=u.user)||void 0===n?void 0:n.getIdToken(o.context.allowLoginOnFishfarm).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});yield t.login(h).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.TFE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.TFE,type:_.ERROR,code:"login"}),t});const S=null===(v=yield null===(m=u.user)||void 0===m?void 0:m.getIdTokenResult().catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}))||void 0===v?void 0:v.claims.gygCustomerId;return i("setLoggedContext",{customerData:{id:S,displayName:p,firstName:a,lastName:r}}),A({action:g.a.emailPassword,type:_.SUCCESS,service:""}),u.user}catch(E){throw e(S.a.SET_LOADING_STATE,!1),y.includes(E.code)?(e(S.a.ADD_ERROR,Object(u.a)(I)[E.code]),E):(e(S.a.ADD_ERROR,T.unknownError),E)}}))(),loginWithEmail:({commit:e,dispatch:i,rootState:o},{email:a,facebookData:s,password:l,rememberMe:d,attemptCounter:m=0})=>n.a((function*(){i("reset");const n=yield C({firebaseConfiguration:o.context.firebaseConfiguration,locale:o.context.locale});try{var v,E,p,h;const{LOCAL:e,SESSION:c}=(null===(v=n.Auth)||void 0===v?void 0:v.Persistence)||{};yield n().setPersistence(d?e:c),i("setLoginTentative"),A({action:g.a.emailPassword,type:_.ATTEMPT,service:""});const u=yield n().signInWithEmailAndPassword(a,l).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),m=yield null===(E=u.user)||void 0===E?void 0:E.getIdToken().catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),S=null===(p=u.user)||void 0===p?void 0:p.displayName,[T,I]=Object(f.a)(S);var L;if(o.context.allowLoginOnFishfarm&&(yield t.createCustomerFromLogin({actionOrigin:g.a.emailPassword,customerData:{firstName:T,lastName:I,isSubscribedForNewsletter:!1,locale:o.context.locale},softOptInDisplayed:!1}).then(()=>{var t;return null===(t=n().currentUser)||void 0===t?void 0:t.getIdToken(!0)}).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FISHFARM_API,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FISHFARM_API,type:_.ERROR,code:"createCustomerFromLogin"}),t})),yield t.login(m).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.TFE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.TFE,type:_.ERROR,code:"login"}),t}),a===(null===s||void 0===s?void 0:s.email)&&(null===s||void 0===s?void 0:s.credential)&&!r()(null===s||void 0===s?void 0:s.credential))yield null===(L=u.user)||void 0===L?void 0:L.linkWithCredential(s.credential).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});const y=yield null===(h=u.user)||void 0===h?void 0:h.getIdTokenResult().catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),C=null===y||void 0===y?void 0:y.claims.gygCustomerId;return i("setLoggedContext",{customerData:{id:C,displayName:S}}),A({action:g.a.emailPassword,type:_.SUCCESS,service:""}),u.user}catch(D){if(e(S.a.SET_LOADING_STATE,!1),I.userNotFound===D.code||I.wrongPassword===D.code){if(m>0)throw e(S.a.ADD_ERROR,T.wrongPassword),D;try{return yield t.checkFirebaseUser(a,l).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FISHFARM_API,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FISHFARM_API,type:_.ERROR,code:"checkFirebaseUser"}),t}),m++,i("loginWithEmail",{email:a,password:l,rememberMe:d,attemptCounter:m})}catch(D){throw e(S.a.ADD_ERROR,T.wrongPassword),D}}yield n().signOut().then(()=>{c.a.error({err:D,visitorId:o.context.visitorId},"Customer auth - login failed internally. User was normally logged on firebase sdk.")}).catch(t=>{throw O(t,{action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.emailPassword,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});const r=y.includes(D.code);throw e(S.a.ADD_ERROR,r?Object(u.a)(I)[D.code]:T.unknownError),D}}))(),loginWithFacebook:({commit:e,dispatch:i,rootState:o})=>n.a((function*(){i("reset");const n=yield C({firebaseConfiguration:o.context.firebaseConfiguration,locale:o.context.locale});try{var a,r,s,c,l,d,m;i("setLoginTentative"),A({action:g.a.facebookAccessToken,type:_.ATTEMPT,service:""});const e=new n.FacebookAuthProvider,u=yield n().signInWithPopup(e).catch(t=>{throw O(t,{action:g.a.facebookAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.facebookAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});if(L(o),!(null===(a=u.user)||void 0===a?void 0:a.email)){var v;null===(v=n().currentUser)||void 0===v||v.delete();const t={code:T.noEmailInUserCredential};throw O(t,{action:g.a.facebookAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.facebookAccessToken,service:R.FIREBASE,type:_.ERROR,code:t.code}),t}(null===(r=u.credential)||void 0===r?void 0:r.accessToken)&&(yield t.validateFacebookToken(u.credential.accessToken).catch(t=>{throw O(t,{action:g.a.facebookAccessToken,service:R.TFE,type:_.ERROR}),A({action:g.a.facebookAccessToken,service:R.TFE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}));const E=null===(s=u.user)||void 0===s?void 0:s.displayName,[p,h=""]=Object(f.a)(E);o.context.allowLoginOnFishfarm&&(yield t.createCustomerFromLogin({actionOrigin:g.a.facebookAccessToken,customerData:{firstName:p,lastName:h,facebookAccessToken:null===(c=u.credential)||void 0===c?void 0:c.accessToken,facebookUserId:null===(l=u.user)||void 0===l?void 0:l.uid,isSubscribedForNewsletter:!1,locale:o.context.locale},softOptInDisplayed:!1}).then(()=>{var t;return null===(t=n().currentUser)||void 0===t?void 0:t.getIdToken(!0)}).catch(t=>{throw O(t,{action:g.a.facebookAccessToken,service:R.FISHFARM_API,type:_.ERROR}),A({action:g.a.facebookAccessToken,service:R.FISHFARM_API,type:_.ERROR,code:"createCustomerFromLogin"}),t}));const S=yield null===(d=u.user)||void 0===d?void 0:d.getIdToken(o.context.allowLoginOnFishfarm).catch(t=>{throw O(t,{action:g.a.facebookAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.facebookAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});yield t.login(S).catch(t=>{throw O(t,{action:g.a.facebookAccessToken,service:R.TFE,type:_.ERROR}),A({action:g.a.facebookAccessToken,service:R.TFE,type:_.ERROR,code:"login"}),t});const I=yield null===(m=u.user)||void 0===m?void 0:m.getIdTokenResult().catch(t=>{throw O(t,{action:g.a.facebookAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.facebookAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),y=null===I||void 0===I?void 0:I.claims.gygCustomerId;return i("setLoggedContext",{customerData:{id:y,displayName:E,firstName:p,lastName:h}}),A({action:g.a.facebookAccessToken,type:_.SUCCESS,service:""}),u.user}catch(E){if(e(S.a.SET_LOADING_STATE,!1),I.facebookAccountExists===E.code){const t=yield n().fetchSignInMethodsForEmail(E.email).then(t=>{const{credential:o,email:a}=E;let r;if(t.includes(n.EmailAuthProvider.PROVIDER_ID))r=T.facebookEmailExists;else{if(!t.includes(n.GoogleAuthProvider.PROVIDER_ID))throw new Error("No used provider has been connected yet.");r=T.facebookGoogleExists}return i("cleanErrors"),e(S.a.ADD_ERROR,r),e(S.a.ADD_FACEBOOK_DATA,{credential:o,email:a}),Promise.resolve(r)}).catch(t=>{throw O(t,{action:g.a.facebookAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.facebookAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});throw new Error(null!==t&&void 0!==t?t:T.unknownError)}throw y.includes(E.code)?(e(S.a.ADD_ERROR,Object(u.a)(I)[E.code]),E):(e(S.a.ADD_ERROR,T.facebookUnknownError),E)}}))(),loginWithGoogle:({commit:e,dispatch:i,rootState:o},{facebookData:a,loginEmail:s})=>n.a((function*(){i("reset");try{var n,c,l,d,m,v;const e=yield C({firebaseConfiguration:o.context.firebaseConfiguration,locale:o.context.locale});i("setLoginTentative"),A({action:g.a.googleAccessToken,type:_.ATTEMPT,service:""});const u=new e.GoogleAuthProvider;r()(s)||u.setCustomParameters({login_hint:s});const p=yield e().signInWithPopup(u).catch(t=>{throw O(t,{action:g.a.googleAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.googleAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),h=null===(n=p.user)||void 0===n?void 0:n.displayName,[S,T]=Object(f.a)(h);L(o),o.context.allowLoginOnFishfarm&&(yield t.createCustomerFromLogin({actionOrigin:g.a.googleAccessToken,customerData:{firstName:S,lastName:T,googleAccessToken:null===(c=p.credential)||void 0===c?void 0:c.accessToken,googleUserId:null===(l=p.user)||void 0===l?void 0:l.uid,isSubscribedForNewsletter:!1,locale:o.context.locale},softOptInDisplayed:!1}).then(()=>{var t;return null===(t=e().currentUser)||void 0===t?void 0:t.getIdToken(!0)}).catch(t=>{throw O(t,{action:g.a.googleAccessToken,service:R.FISHFARM_API,type:_.ERROR}),A({action:g.a.googleAccessToken,service:R.FISHFARM_API,type:_.ERROR,code:"createCustomerFromLogin"}),t}));const I=yield null===(d=p.user)||void 0===d?void 0:d.getIdToken(o.context.allowLoginOnFishfarm).catch(t=>{throw O(t,{action:g.a.googleAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.googleAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});yield t.login(I).catch(t=>{throw O(t,{action:g.a.googleAccessToken,service:R.TFE,type:_.ERROR}),A({action:g.a.googleAccessToken,service:R.TFE,type:_.ERROR,code:"login"}),t});const y=yield null===(m=p.user)||void 0===m?void 0:m.getIdTokenResult().catch(t=>{throw O(t,{action:g.a.googleAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.googleAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),D=null===y||void 0===y?void 0:y.claims.gygCustomerId;var E;if((null===(v=p.user)||void 0===v?void 0:v.email)===(null===a||void 0===a?void 0:a.email)&&(null===a||void 0===a?void 0:a.credential)&&!r()(null===a||void 0===a?void 0:a.credential))yield null===(E=p.user)||void 0===E?void 0:E.linkWithCredential(a.credential).catch(t=>{throw O(t,{action:g.a.googleAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.googleAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});return i("setLoggedContext",{customerData:{id:D,displayName:h,firstName:S,lastName:T}}),A({action:g.a.googleAccessToken,type:_.SUCCESS,service:""}),p.user}catch(p){throw e(S.a.SET_LOADING_STATE,!1),y.includes(p.code)?(e(S.a.ADD_ERROR,Object(u.a)(I)[p.code]),p):(e(S.a.ADD_ERROR,T.googleUnknownError),p)}}))(),loginWithApple:({commit:e,dispatch:i,rootState:o})=>n.a((function*(){i("reset");try{var n,a,r,s;const e=yield C({firebaseConfiguration:o.context.firebaseConfiguration,locale:o.context.locale});i("setLoginTentative"),A({action:g.a.appleAccessToken,type:_.ATTEMPT,service:""});const l=new e.OAuthProvider("apple.com"),d=yield e().signInWithPopup(l).catch(t=>{throw O(t,{action:g.a.appleAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.appleAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});if(L(o),!(null===(n=d.user)||void 0===n?void 0:n.email)){var c;null===(c=e().currentUser)||void 0===c||c.delete();const t={code:T.noEmailInUserCredential};throw O(t,{action:g.a.appleAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.appleAccessToken,service:R.FIREBASE,type:_.ERROR,code:t.code}),t}const u=null===(a=d.user)||void 0===a?void 0:a.displayName,[m,v=""]=Object(f.a)(u);o.context.allowLoginOnFishfarm&&(yield t.createCustomerFromLogin({actionOrigin:g.a.appleAccessToken,customerData:{firstName:m,lastName:v,isSubscribedForNewsletter:!1,locale:o.context.locale},softOptInDisplayed:!1}).then(()=>{var t;return null===(t=e().currentUser)||void 0===t?void 0:t.getIdToken(!0)}).catch(t=>{throw O(t,{action:g.a.appleAccessToken,service:R.FISHFARM_API,type:_.ERROR}),A({action:g.a.appleAccessToken,service:R.FISHFARM_API,type:_.ERROR,code:"createCustomerFromLogin"}),t}));const E=yield null===(r=d.user)||void 0===r?void 0:r.getIdToken(o.context.allowLoginOnFishfarm).catch(t=>{throw O(t,{action:g.a.appleAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.appleAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});yield t.login(E).catch(t=>{throw O(t,{action:g.a.appleAccessToken,service:R.TFE,type:_.ERROR}),A({action:g.a.appleAccessToken,service:R.TFE,type:_.ERROR,code:"login"}),t});const p=yield null===(s=d.user)||void 0===s?void 0:s.getIdTokenResult().catch(t=>{throw O(t,{action:g.a.appleAccessToken,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.appleAccessToken,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),h=null===p||void 0===p?void 0:p.claims.gygCustomerId;return i("setLoggedContext",{customerData:{id:h,displayName:u,firstName:m,lastName:v}}),A({action:g.a.appleAccessToken,type:_.SUCCESS,service:""}),d.user}catch(l){throw e(S.a.SET_LOADING_STATE,!1),y.includes(l.code)?(e(S.a.ADD_ERROR,Object(u.a)(I)[l.code]),l):(e(S.a.ADD_ERROR,T.appleUnknownError),l)}}))(),initializeOneTap:({dispatch:e,rootState:i},{delay:o,containerName:a,analyticsLogger:r})=>n.a((function*(){if(["ShoppingCart","CustomerInformation","PaymentInformation","AdditionalPaymentInformation","BookingSummary","Confirmation","Login","SignUp"].includes(a))return;const s=function(){var o=n.a((function*({credential:o}){try{var n,a,r,s;e("setLoginTentative"),A({action:g.a.googleOneTap,type:_.ATTEMPT,service:""});const c=yield C({firebaseConfiguration:i.context.firebaseConfiguration,locale:i.context.locale}),l=c.GoogleAuthProvider.credential(o),d=yield c().signInWithCredential(l).catch(t=>{throw O(t,{action:g.a.googleOneTap,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.googleOneTap,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),u=null===(n=d.user)||void 0===n?void 0:n.displayName,[m,v=""]=Object(f.a)(u);L(i),i.context.allowLoginOnFishfarm&&(yield t.createCustomerFromLogin({actionOrigin:g.a.googleOneTap,customerData:{firstName:m,lastName:v,googleAccessToken:d.credential.accessToken,googleUserId:null===(a=d.user)||void 0===a?void 0:a.uid,isSubscribedForNewsletter:!1,locale:i.context.locale},softOptInDisplayed:!1}).then(()=>{var t;return null===(t=c().currentUser)||void 0===t?void 0:t.getIdToken(!0)}).catch(t=>{throw O(t,{action:g.a.googleOneTap,service:R.FISHFARM_API,type:_.ERROR}),A({action:g.a.googleOneTap,service:R.FISHFARM_API,type:_.ERROR,code:"createCustomerFromLogin"}),t}));const E=yield null===(r=d.user)||void 0===r?void 0:r.getIdToken(i.context.allowLoginOnFishfarm).catch(t=>{throw O(t,{action:g.a.googleOneTap,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.googleOneTap,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t});yield t.login(E).catch(t=>{throw O(t,{action:g.a.googleOneTap,service:R.TFE,type:_.ERROR}),A({action:g.a.googleOneTap,service:R.TFE,type:_.ERROR,code:"login"}),t});const p=yield null===(s=d.user)||void 0===s?void 0:s.getIdTokenResult().catch(t=>{throw O(t,{action:g.a.googleOneTap,service:R.FIREBASE,type:_.ERROR}),A({action:g.a.googleOneTap,service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t}),h=null===p||void 0===p?void 0:p.claims.gygCustomerId;A({action:g.a.googleOneTap,type:_.SUCCESS,service:""}),e("setLoggedContext",{customerData:{id:h,displayName:u,firstName:m,lastName:v}}),e("afterAuthenticated",{refreshAfterAuthentication:!0,message:"login"})}catch(c){throw Object(d.a)(e)("notifications/setMessage","loginFailed"),Object(E.b)(),c}}));return function(t){return o.apply(this,arguments)}}();yield Object(E.d)(()=>{Object(E.a)(window)?(google.accounts.id.initialize({client_id:i.googleOneTapID,cancel_on_tap_outside:!1,auto_select:!0,callback:s}),google.accounts.id.prompt(t=>{Object(E.c)(t,r,a)})):c.a.warn("One tap could not be initialized.")},o)}))(),updateDisplayName:({rootState:t},e)=>n.a((function*(){var i;null===(i=(yield C({firebaseConfiguration:t.context.firebaseConfiguration,locale:t.context.locale}))().currentUser)||void 0===i||i.updateProfile({displayName:e}).catch(t=>{throw O(t,{action:"updateDisplayName",service:R.FIREBASE,type:_.ERROR}),A({action:"updateDisplayName",service:R.FIREBASE,type:_.ERROR,code:null===t||void 0===t?void 0:t.code}),t})}))(),checkSessionValidity:({dispatch:e,rootState:i,state:o},{redirect:a,redirectPath:r}={redirect:!1,redirectPath:""})=>n.a((function*(){const s=yield C({firebaseConfiguration:i.context.firebaseConfiguration,locale:i.context.locale});try{const i=yield new Promise((t,e)=>{s().onAuthStateChanged(function(){var e=n.a((function*(e){t(e?yield e.getIdTokenResult():null)}));return function(t){return e.apply(this,arguments)}}(),e)}),u=null===i||void 0===i?void 0:i.token;if(o.revalidateSession){var c;const e=Object(l.a)().get("csrfToken"),i=yield null===(c=s().currentUser)||void 0===c?void 0:c.getIdToken(!0);if(i&&e)try{yield t.reissueFirebaseSessionCookie({freshIdToken:i,csrfToken:e}),a&&window.location.replace(r)}catch(d){O(d.toJSON(),{action:"checkSessionValidity",service:R.TFE,type:_.ERROR}),A({action:"checkSessionValidity",service:R.TFE,type:_.ERROR,code:d.code})}}u||e("logout")}catch(d){O(d,{action:"checkSessionValidity",service:R.TFE,type:_.ERROR}),A({action:"checkSessionValidity",service:R.TFE,type:_.ERROR,code:null===d||void 0===d?void 0:d.code}),yield e("logout"),a&&window.location.replace("/")}}))(),fetchProvidersForEmail:({rootState:e,commit:i},o)=>n.a((function*(){const n=e.auth.providerData;if(!(null===n||void 0===n?void 0:n.oldEmail)||n.oldEmail!==o)try{A({action:g.a.fetchSignInMethods,type:_.ATTEMPT,service:""});const e=(yield t.fetchSignInMethodsForEmail({email:o})).data;i(S.a.SET_PROVIDER_DATA,{providers:e,email:o,oldEmail:o,error:void 0}),A({action:g.a.fetchSignInMethods,type:_.SUCCESS,service:""})}catch(a){i(S.a.SET_PROVIDER_DATA,{providers:void 0,email:o,oldEmail:o,error:a.message}),A({action:g.a.fetchSignInMethods,type:_.ERROR,service:R.AUTH,code:null===a||void 0===a?void 0:a.message}),O(a,{action:g.a.fetchSignInMethods,type:_.ERROR,service:R.AUTH})}}))(),triggerEmailLoginLink:({commit:e,dispatch:i,rootState:o},{nextUri:a,email:r})=>n.a((function*(){try{var n;yield i("reset"),A({action:g.a.triggerEmailLoginLink,type:_.ATTEMPT,service:R.AUTH});const s=Object(m.a)(null===(n=o.context)||void 0===n?void 0:n.localePath,a),c=new URL(s,window.location.origin);if(!(yield t.triggerEmailLoginLink({email:r,nextUri:c.href})))throw new Error(T.sendEmailLinkLoginFailed)}catch(s){throw O(s,{action:g.a.triggerEmailLoginLink,service:R.AUTH,type:_.ERROR}),A({action:g.a.triggerEmailLoginLink,service:R.AUTH,type:_.ERROR,code:T.sendEmailLinkLoginFailed}),e(S.a.ADD_ERROR,T.sendEmailLinkLoginFailed),s}finally{e(S.a.SET_LOADING_STATE,!1)}}))(),isEmailLoginLink:({commit:t,dispatch:e,rootState:i},{emailLink:o})=>n.a((function*(){yield e("reset");const n=yield C({firebaseConfiguration:i.context.firebaseConfiguration,locale:i.context.locale});try{return n().isSignInWithEmailLink(o)}catch(a){return t(S.a.ADD_ERROR,y.includes(a.code)?Object(u.a)(I)[a.code]:T.unknownError),!1}finally{t(S.a.SET_LOADING_STATE,!1)}}))(),loginWithEmailLink:({commit:e,dispatch:i,rootState:o},{emailLink:a,email:r})=>n.a((function*(){const n=yield C({firebaseConfiguration:o.context.firebaseConfiguration,locale:o.context.locale}),s=(t,e,i)=>{O(t,{action:g.a.emailLinkAuth,service:e,type:_.ERROR}),A({action:g.a.emailLinkAuth,service:e,type:_.ERROR,code:i})};try{var l,d,m;i("setLoginTentative");const c=yield n().signInWithEmailLink(r,a);A({action:g.a.emailLinkAuth,type:_.ATTEMPT,service:""});const u=yield null===(l=c.user)||void 0===l?void 0:l.getIdToken().catch(t=>{var e;throw s(t,R.FIREBASE,null!==(e=null===t||void 0===t?void 0:t.code)&&void 0!==e?e:""),t}),v=null===(d=c.user)||void 0===d?void 0:d.displayName,[E,p]=Object(f.a)(v);if(o.context.allowLoginOnFishfarm&&(yield t.createCustomerFromLogin({actionOrigin:g.a.emailLinkAuth,customerData:{firstName:E,lastName:p,isSubscribedForNewsletter:!1,locale:o.context.locale},softOptInDisplayed:!1}).then(()=>{var t;return null===(t=n().currentUser)||void 0===t?void 0:t.getIdToken(!0)}).catch(t=>{throw s(t,R.FISHFARM_API,"createCustomerFromLogin"),t})),yield t.login(u).catch(t=>{throw s(t,R.TFE,"login"),t}),(null===(m=c.user)||void 0===m?void 0:m.email)!==r)throw new Error(T.invalidEmail);return{user:c.user}}catch(v){yield n().signOut().then(()=>{c.a.error({err:v,visitorId:o.context.visitorId},"Customer auth - login failed internally. User was normally logged on firebase sdk.")}).catch(t=>{var e;s(t,R.FIREBASE,null!==(e=null===t||void 0===t?void 0:t.code)&&void 0!==e?e:"")});const t=y.includes(v.code);return e(S.a.ADD_ERROR,t?Object(u.a)(I)[v.code]:T.unknownError),null}finally{e(S.a.SET_LOADING_STATE,!1)}}))()}}},145:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return c}));var o=i(9);const n=()=>({dates:{timeRange:"",multiTimeRange:[],from:"",to:"",searchUrl:""}}),a="yyyy-MM-dd",r={dates:t=>t.dates},s={setDates:(t,e)=>{t.dates=o.a({},t.dates,e)},setSearchUrl:(t,e)=>{t.dates=o.a({},t.dates,{searchUrl:e})},setTimeRange:(t,e)=>{t.dates=o.a({},t.dates,{timeRange:e})},setMultiTimeRange:(t,e)=>{t.dates=o.a({},t.dates,{multiTimeRange:e})}};function c(){return{namespaced:!0,state:n,getters:r,mutations:s}}},154:function(t,e,i){"use strict";e.a={setHasError:(t,e)=>{t.hasError=e},setShowModal:(t,e)=>{t.showModal=e},setTrackingData:(t,e)=>{t.trackingData=e},setGoogleTagManagerId:(t,e)=>{t.googleTagManagerId=e},setGoogleMapsAPIKey:(t,e)=>{t.googleMapsAPIKey=e},setGoogleOneTapID:(t,e)=>{t.googleOneTapID=e}}},155:function(t,e,i){"use strict";e.a={hasError:t=>t.hasError}},160:function(t,e,i){"use strict";i.d(e,"b",(function(){return E})),i.d(e,"a",(function(){return h}));var o=i(134),n={wishlist:t=>t.wishlist,wishlistGroups:t=>t.wishlistGroups,publicListGroup:t=>t.publicListGroup,isOwner:t=>t.isOwner,recommendedActivities:t=>t.recommendedActivities,loadWishlistModals:t=>t.loadWishlistModals,modalVariantOpen:t=>t.modalVariantOpen,showWishlistNotification:t=>o.a&&window&&window.localStorage&&window.localStorage.getItem("showWishlistNotification")||t.showWishlistNotification};var a={ADD_ITEM_TO_WISHLIST:"ADD_ITEM_TO_WISHLIST",ADD_ITEMS_TO_WISHLIST:"ADD_ITEMS_TO_WISHLIST",ADD_ITEM_TO_WISHLIST_GROUP:"ADD_ITEM_TO_WISHLIST_GROUP",ADD_GROUP_TO_WISHLIST:"ADD_GROUP_TO_WISHLIST",UPDATE_WISHLIST_GROUP:"UPDATE_WISHLIST_GROUP",SET_GROUPS_TO_WISHLIST:"SET_GROUPS_TO_WISHLIST",DROP_ITEM_FROM_WISHLIST:"DROP_ITEM_FROM_WISHLIST",SET_PLANNER_REQUEST_LOADING_TRUE:"SET_PLANNER_REQUEST_LOADING_TRUE",SET_PLANNER_REQUEST_LOADING_FALSE:"SET_PLANNER_REQUEST_LOADING_FALSE",SET_ACTIVITY_RECOMMENDATIONS:"SET_ACTIVITY_RECOMMENDATIONS",SET_RECOMMENDATIONS_UUID:"SET_RECOMMENDATIONS_UUID",SET_PLANNER_MODAL_ERROR_REQUEST_TRUE:"SET_PLANNER_MODAL_ERROR_REQUEST_TRUE",SET_PLANNER_MODAL_ERROR_REQUEST_FALSE:"SET_PLANNER_MODAL_ERROR_REQUEST_FALSE",SET_PLANNER_GENERIC_ERROR_REQUEST_TRUE:"SET_PLANNER_GENERIC_ERROR_REQUEST_TRUE",SET_PLANNER_GENERIC_ERROR_REQUEST_FALSE:"SET_PLANNER_GENERIC_ERROR_REQUEST_FALSE",DROP_ITEM_FROM_MANUAL_WISHLIST_GROUP:"DROP_ITEM_FROM_MANUAL_WISHLIST_GROUP",CLEAR_ALL_WISHLIST_ITEMS:"CLEAR_ALL_WISHLIST_ITEMS",SET_SHOW_NOTIFICATION_BADGE:"SET_SHOW_NOTIFICATION_BADGE",SET_PUBLIC_LIST:"SET_PUBLIC_LIST",LOAD_WISHLIST_MODALS:"LOAD_WISHLIST_MODALS",SET_MODAL_VARIATION_SUCCESS:"SET_MODAL_VARIATION_SUCCESS",SET_MODAL_VARIATION_SELECT:"SET_MODAL_VARIATION_SELECT",SET_MODAL_VARIATION_DELETE:"SET_MODAL_VARIATION_DELETE",RESET_MODAL_VARIATION:"RESET_MODAL_VARIATION"},r={[a.ADD_ITEM_TO_WISHLIST](t,e){t.wishlist.push(e)},[a.ADD_GROUP_TO_WISHLIST](t,e){t.wishlistGroups.push(e)},[a.SET_GROUPS_TO_WISHLIST](t,e){t.wishlistGroups=e},[a.ADD_ITEMS_TO_WISHLIST](t,e){t.wishlist.push(...e)},[a.DROP_ITEM_FROM_WISHLIST](t,e){-1!==t.wishlist.indexOf(e)&&t.wishlist.splice(t.wishlist.indexOf(e),1)},[a.DROP_ITEM_FROM_MANUAL_WISHLIST_GROUP](t,{listUuid:e,activityId:i}){const o=t.wishlistGroups.find(t=>t.id===e);if(o){const t=o.activities.findIndex(t=>t.id&&t.id.toString()===i.toString());o.activities.splice(t,1)}},[a.ADD_ITEM_TO_WISHLIST_GROUP](t,{listUuid:e,activity:i}){const o=t.wishlistGroups.find(t=>t.id===e);o&&o.activities.push(i)},[a.UPDATE_WISHLIST_GROUP](t,{listUuid:e,group:i}){const o=t.wishlistGroups.findIndex(t=>t.id===e);o>=0&&t.wishlistGroups.splice(o,1,i),t.wishlistGroups=t.wishlistGroups.sort((t,e)=>{if(t.updateDate&&e.updateDate){const i=new Date(t.updateDate),o=new Date(e.updateDate);return Math.abs(null===o||void 0===o?void 0:o.getTime())-(null===i||void 0===i?void 0:i.getTime())}return 0})},[a.CLEAR_ALL_WISHLIST_ITEMS](t){t.wishlist=[]},[a.SET_SHOW_NOTIFICATION_BADGE](t,e){t.showWishlistNotification=e},[a.SET_PLANNER_REQUEST_LOADING_TRUE](t){t.isLoading=!0},[a.SET_PLANNER_REQUEST_LOADING_FALSE](t){t.isLoading=!1},[a.SET_PLANNER_MODAL_ERROR_REQUEST_TRUE](t){t.wishlistModalError=!0},[a.SET_PLANNER_MODAL_ERROR_REQUEST_FALSE](t){t.wishlistModalError=!1},[a.SET_PLANNER_GENERIC_ERROR_REQUEST_TRUE](t){t.genericError=!0},[a.SET_PLANNER_GENERIC_ERROR_REQUEST_FALSE](t){t.genericError=!1},[a.SET_PUBLIC_LIST](t,{group:e,isOwner:i}){t.publicListGroup=e,t.isOwner=i},[a.SET_ACTIVITY_RECOMMENDATIONS](t,e){t.recommendedActivities=e},[a.SET_RECOMMENDATIONS_UUID](t,e){t.recommendationsUuid=e},[a.LOAD_WISHLIST_MODALS](t){t.loadWishlistModals=!0},[a.SET_MODAL_VARIATION_SUCCESS](t,e){t.activityId=e,t.modalVariantOpen=E.SUCCESS_MODAL},[a.SET_MODAL_VARIATION_SELECT](t,{activityId:e,locationId:i,locationName:o}){t.activityId=e,t.locationId=i,t.locationName=o,t.modalVariantOpen=E.SELECT_MODAL},[a.SET_MODAL_VARIATION_DELETE](t,{activityId:e,activityTitle:i,listUuid:o,itemUuid:n}){t.activityId=e,t.activityTitle=i,t.listUuid=o,t.itemUuid=n,t.modalVariantOpen=E.DELETE_MODAL},[a.RESET_MODAL_VARIATION](t){t.modalVariantOpen=""}},s=i(6),c=i(35),l=i(3),d=i(38),u=i(23),m=i(64);var v=i(177);const E={DELETE_MODAL:"deleteModal",SUCCESS_MODAL:"successModal",SELECT_MODAL:"selectModal"},p=()=>({wishlist:[],wishlistGroups:[],publicListGroup:{id:"",updateDate:void 0,title:"",locationIds:[],activities:[],images:[""],startingDate:0,endingDate:0,sharing:{imageUrl:"",sharingUrl:""}},isOwner:!1,showWishlistNotification:"false",isLoading:!1,wishlistModalError:!1,genericError:!1,recommendedActivities:[],recommendationsUuid:"",loadWishlistModals:!1,modalVariantOpen:"",activityId:void 0,locationId:-1,locationName:"",activityTitle:"",listUuid:"",itemUuid:""});function h(t){return{namespaced:!0,state:p,getters:n,mutations:r,actions:(e=new v.a(t),{fetchWishlist:function(){var t=s.a((function*({commit:t,rootState:i},o){const{containerName:n,withActivityDetails:r=!1}=o,s=new Set;let c=[],u=!0,m=!0;try{if(Object(d.a)(i.auth)){const t=i.auth.customer.id;u=!1,c=yield e.fetchAllWishlists(t,r),m=!1}for(const t of c)for(const e of t.activities)e.id&&s.add(e.id)}catch(h){var v,E,p;throw l.a.error({customerId:null===(v=i.auth)||void 0===v||null===(E=v.customer)||void 0===E?void 0:E.id,isLoggedIn:null===(p=i.auth)||void 0===p?void 0:p.isLoggedIn,containerName:n,activityIds:Array.from(s),errorsDuringUserVerification:u,errorsDuringHittingRequestOrParsingGroups:m,error:h},"FetchWishlist for customer failed"),c=[],s.clear(),t(a.SET_PLANNER_GENERIC_ERROR_REQUEST_TRUE),h}t(a.CLEAR_ALL_WISHLIST_ITEMS),t(a.ADD_ITEMS_TO_WISHLIST,Array.from(s)),t(a.SET_GROUPS_TO_WISHLIST,c)}));return function(e,i){return t.apply(this,arguments)}}(),fetchWishlistGroup:function(){var t=s.a((function*({commit:t,rootState:i},o){var n,r;const{id:s}=null!==(r=null===(n=i.auth)||void 0===n?void 0:n.customer)&&void 0!==r?r:{};if(!s)throw new m.a("Unauthorized user for this endpoint.",i.route.fullPath);try{const i=yield e.fetchWishlist(o);t(a.SET_GROUPS_TO_WISHLIST,[i]);const n=i.activities.map(t=>t.id);t(a.ADD_ITEMS_TO_WISHLIST,n)}catch(c){throw l.a.error({customerId:s,error:c},"FetchSelectedWishlist for customer failed"),t(a.SET_PLANNER_GENERIC_ERROR_REQUEST_TRUE),c}}));return function(e,i){return t.apply(this,arguments)}}(),fetchSharedWishlist:function(){var t=s.a((function*({commit:t,rootState:i},o){try{let n;Object(d.a)(i.auth)&&(n=i.auth.customer.id);const r=yield e.fetchSharedWishlist(n,o),{isOwner:s}=r.data,l=yield Object(c.c)({lists:[r.data.planList]})[0];l.activities.forEach(t=>t.availability={message:"",nextAvailableDateTime:"",type:"",metadata:{key:"",spots:"",pattern:""}}),t(a.SET_PUBLIC_LIST,{group:l,isOwner:s})}catch(n){t(a.SET_PLANNER_GENERIC_ERROR_REQUEST_TRUE)}}));return function(e,i){return t.apply(this,arguments)}}(),toggleNotificationBadge:({commit:t},e)=>{window&&window.localStorage&&window.localStorage.setItem("showWishlistNotification",e),t(a.SET_SHOW_NOTIFICATION_BADGE,e)},createWishlist:function(){var t=s.a((function*({commit:t,rootState:i},o){let n;try{if(Object(d.a)(i.auth)){t(a.SET_PLANNER_MODAL_ERROR_REQUEST_FALSE),t(a.SET_PLANNER_REQUEST_LOADING_TRUE);const i=yield e.createWishlist(o);n={id:i.data.uuid,title:i.data.name,images:[],activities:[]},t(a.ADD_GROUP_TO_WISHLIST,n),t(a.SET_PLANNER_REQUEST_LOADING_FALSE)}}catch(r){t(a.SET_PLANNER_REQUEST_LOADING_FALSE),t(a.SET_PLANNER_MODAL_ERROR_REQUEST_TRUE)}}));return function(e,i){return t.apply(this,arguments)}}(),renameWishlist:function(){var t=s.a((function*({commit:t,rootState:i},{listUuid:o,wishlistName:n}){try{if(Object(d.a)(i.auth)){t(a.SET_PLANNER_MODAL_ERROR_REQUEST_FALSE),t(a.SET_PLANNER_REQUEST_LOADING_TRUE);const i=yield e.updateWishlist(o,n),r=Object(c.c)({lists:[i.data]})[0];t(a.UPDATE_WISHLIST_GROUP,{listUuid:o,group:r}),t(a.SET_PLANNER_REQUEST_LOADING_FALSE)}}catch(r){t(a.SET_PLANNER_REQUEST_LOADING_FALSE),t(a.SET_PLANNER_MODAL_ERROR_REQUEST_TRUE)}}));return function(e,i){return t.apply(this,arguments)}}(),updateWishlistDates:function(){var t=s.a((function*({commit:t,rootState:i},{listUuid:o,fromDate:n,toDate:r,name:s}){try{if(Object(d.a)(i.auth)){t(a.SET_PLANNER_MODAL_ERROR_REQUEST_FALSE),t(a.SET_PLANNER_REQUEST_LOADING_TRUE);const i=yield e.updateWishlist(o,s,n,r),l=Object(c.c)({lists:[i.data]})[0];t(a.UPDATE_WISHLIST_GROUP,{listUuid:o,group:l}),t(a.SET_PLANNER_REQUEST_LOADING_FALSE)}}catch(l){t(a.SET_PLANNER_REQUEST_LOADING_FALSE),t(a.SET_PLANNER_MODAL_ERROR_REQUEST_TRUE)}}));return function(e,i){return t.apply(this,arguments)}}(),clearWishlistDates:function(){var t=s.a((function*({commit:t,rootState:i},{listUuid:o}){try{if(Object(d.a)(i.auth)){t(a.SET_PLANNER_MODAL_ERROR_REQUEST_FALSE),t(a.SET_PLANNER_REQUEST_LOADING_TRUE);const i=yield e.clearWishlistDates(o),n=Object(c.c)({lists:[i.data]})[0];t(a.UPDATE_WISHLIST_GROUP,{listUuid:o,group:n}),t(a.SET_PLANNER_REQUEST_LOADING_FALSE)}}catch(n){t(a.SET_PLANNER_REQUEST_LOADING_FALSE),t(a.SET_PLANNER_MODAL_ERROR_REQUEST_TRUE)}}));return function(e,i){return t.apply(this,arguments)}}(),addToWishlist:function(){var t=s.a((function*({dispatch:t,commit:i,rootState:o},{activityId:n,listUuid:r}){try{if(Object(d.a)(o.auth)){i(a.ADD_ITEM_TO_WISHLIST,n);const t=yield e.addToWishlist(r,n),o=Object(c.c)({lists:[t.data]})[0];i(a.UPDATE_WISHLIST_GROUP,{listUuid:r,group:o})}}catch(s){i(a.DROP_ITEM_FROM_WISHLIST,n),i(a.DROP_ITEM_FROM_MANUAL_WISHLIST_GROUP,{listUuid:r,activityId:n}),Object(u.a)(t)("notifications/setMessage","genericPlannerError")}}));return function(e,i){return t.apply(this,arguments)}}(),removeFromWishlist:function(){var t=s.a((function*({dispatch:t,commit:i,rootState:o},{itemUuid:n,listUuid:r,activityId:s}){try{if(Object(d.a)(o.auth)){i(a.DROP_ITEM_FROM_WISHLIST,s),i(a.DROP_ITEM_FROM_MANUAL_WISHLIST_GROUP,{listUuid:r,activityId:s});const t=yield e.removeFromWishlist(r,n),o=Object(c.c)({lists:[t.data]})[0];i(a.UPDATE_WISHLIST_GROUP,{listUuid:r,group:o})}}catch(l){i(a.ADD_ITEM_TO_WISHLIST,s),Object(u.a)(t)("notifications/setMessage","genericPlannerError")}}));return function(e,i){return t.apply(this,arguments)}}(),moveToWishlist:function(){var t=s.a((function*({commit:t,rootState:i},{activityId:o,sourceListUuid:n,targetListUuid:r,targetListName:s}){const c=new Set;let l=[];try{Object(d.a)(i.auth)&&(l=yield e.moveToWishlist(n,r,s,o));for(const t of l)for(const e of t.activities)e.id&&c.add(e.id)}catch(u){l=[],c.clear()}t(a.CLEAR_ALL_WISHLIST_ITEMS),t(a.ADD_ITEMS_TO_WISHLIST,Array.from(c)),t(a.SET_GROUPS_TO_WISHLIST,l)}));return function(e,i){return t.apply(this,arguments)}}(),addAfterCreate:function(){var t=s.a((function*({commit:t,rootState:i},{wishlistName:o,activityId:n}){let r;try{if(Object(d.a)(i.auth)){t(a.SET_PLANNER_MODAL_ERROR_REQUEST_FALSE),t(a.SET_PLANNER_REQUEST_LOADING_TRUE);const i=yield e.createWishlist(o);r={id:i.data.uuid,title:i.data.name,images:[""],activities:[]},t(a.ADD_GROUP_TO_WISHLIST,r);const s=yield e.addToWishlist(i.data.uuid,n),l=Object(c.c)({lists:[s.data]})[0];t(a.ADD_ITEM_TO_WISHLIST,n),t(a.UPDATE_WISHLIST_GROUP,{listUuid:i.data.uuid,group:l}),t(a.SET_PLANNER_REQUEST_LOADING_FALSE)}}catch(s){t(a.SET_PLANNER_REQUEST_LOADING_FALSE),t(a.SET_PLANNER_MODAL_ERROR_REQUEST_TRUE)}}));return function(e,i){return t.apply(this,arguments)}}(),deleteWishlist:function(){var t=s.a((function*({commit:t,rootState:i},o){try{t(a.SET_PLANNER_REQUEST_LOADING_TRUE),Object(d.a)(i.auth)&&(t(a.SET_PLANNER_GENERIC_ERROR_REQUEST_FALSE),yield e.deleteWishlist(o))}catch(n){t(a.SET_PLANNER_GENERIC_ERROR_REQUEST_TRUE)}t(a.SET_PLANNER_REQUEST_LOADING_FALSE)}));return function(e,i){return t.apply(this,arguments)}}(),fetchRecommendations:function(){var t=s.a((function*({commit:t,rootState:i},{listUuid:o,itemUuid:n}){let r={recommendedActivities:[],recommendationsUuid:""};try{Object(d.a)(i.auth)&&(r=yield e.fetchRecommendations(o,n),t(a.SET_ACTIVITY_RECOMMENDATIONS,r.recommendedActivities),t(a.SET_RECOMMENDATIONS_UUID,r.recommendationsUuid))}catch(s){t(a.SET_ACTIVITY_RECOMMENDATIONS,[]),t(a.SET_RECOMMENDATIONS_UUID,"")}}));return function(e,i){return t.apply(this,arguments)}}(),lazyLoadWishlistModals:({commit:t})=>{t(a.LOAD_WISHLIST_MODALS)},showSuccessNotification:({commit:t},e)=>{t(a.SET_MODAL_VARIATION_SUCCESS,e)},showSelectModal:({commit:t},{activityId:e,locationId:i,locationName:o})=>{t(a.SET_MODAL_VARIATION_SELECT,{activityId:e,locationId:i,locationName:o})},showDeleteModal({commit:t},{activityId:e,activityTitle:i,listUuid:o,itemUuid:n}){t(a.SET_MODAL_VARIATION_DELETE,{activityId:e,activityTitle:i,listUuid:o,itemUuid:n})},resetModalVariation({commit:t}){t(a.RESET_MODAL_VARIATION)}})};var e}},178:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var o=i(6),n=i(142),a=i(50);const r=()=>({customerId:null,marketingStatusCode:null,marketingEnabled:!1}),s={customerId:t=>t.customerId,marketingStatusCode:t=>t.marketingStatusCode,marketingEnabled:t=>t.marketingEnabled};const c={SET_CUSTOMER_ID(t,e){t.customerId=e},SET_MARKETING_STATUS_CODE(t,e){t.marketingStatusCode=e},SET_MARKETING_ENABLED(t,e){t.marketingEnabled=e}};function l(t){return{namespaced:!0,state:r,getters:s,actions:(e=new a.b(t),{subscribeUser:function(){var t=o.a((function*({commit:t},i){var o;const{email:a,customerId:r,containerName:s,source:c}=i,l=yield e.marketingEmailsSubscribe(a,r,{containerName:s,source:c});var d,u;(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.customerId)?(t("SET_CUSTOMER_ID",null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.customerId),t("SET_MARKETING_STATUS_CODE",n.a.SUCCESS)):t("SET_MARKETING_STATUS_CODE",null!==(u=null===l||void 0===l?void 0:l.status)&&void 0!==u?u:null)}));return function(e,i){return t.apply(this,arguments)}}(),marketingEnabled:function(){var t=o.a((function*({commit:t},i){i.customerId&&t("SET_MARKETING_ENABLED",yield e.isMarketingEnabled(i.customerId,i.categories,i.activeConsent))}));return function(e,i){return t.apply(this,arguments)}}()}),mutations:c};var e}},179:function(t,e,i){"use strict";var o=i(6),n=i(180);const a={confirmationMessage:t=>t.confirmationMessage,success:t=>t.success},r={CONFIRMATION_MESSAGE(t,e){t.confirmationMessage=e},SET_SUCCESS(t,e){t.success=e}};e.a=t=>{return{namespaced:!0,state:()=>({confirmationMessage:"",success:!1}),actions:(e=new n.a(t),{sendDownloadAppLink:({commit:t},{type:i,sendTo:n,utmCampaign:a,shoppingCartHash:r,deepLink:s,sendLinkErrorMessage:c})=>o.a((function*(){const o=yield e.downloadAppLink({type:i,sendTo:n,utmCampaign:a,shoppingCartHash:r,deepLink:s});var l,d;t("CONFIRMATION_MESSAGE",null!==(l=null===o||void 0===o?void 0:o.message)&&void 0!==l?l:c),t("SET_SUCCESS",null!==(d=null===o||void 0===o?void 0:o.success)&&void 0!==d&&d)}))()}),getters:a,mutations:r};var e}},181:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var o=i(136),n=i(13),a=i(222),r=i(106),s=i(84),c=i(105);const l=()=>({activitiesData:{},isLoading:!1,locationData:null,parentLocationData:null,topLocationsHeader:null,relatedTopLocations:null,relatedLocation:null,collections:[],collectionsUid:"",categoryNavigation:void 0,topSightsRankingUuid:void 0,attractionTripItemsData:{items:[]},nearestLocations:[],nearestActivity:Object.assign({},c.a),tripItems:[],tripItemGroupCategories:[],tripItemGroupNavigationItems:[],activeTab:"",entryTab:"",cache:{},merchUniqueCollection:null});function d(t,e){return{namespaced:!0,state:l,actions:Object(s.b)(new r.a(t),new a.a(e)),getters:o.b,mutations:n.b}}},189:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var o=i(6),n=i(23),a=i(190);const r=()=>({incentive:null,incentives:[],selectedDestinations:[null,null,null]}),s=t=>({getIncentive:function(){var e=o.a((function*({commit:e},{incentiveHash:i}){if(i){const o=yield t.getIncentive(i);e("setIncentive",null===o||void 0===o?void 0:o.incentive)}}));return function(t,i){return e.apply(this,arguments)}}(),getCustomerIncentives:function(){var e=o.a((function*({commit:e},{customerId:i}){const o=yield t.getCustomerIncentives(i);e("setIncentives",null===o||void 0===o?void 0:o.incentives)}));return function(t,i){return e.apply(this,arguments)}}(),getVisitorIncentives:function(){var e=o.a((function*({commit:e,rootState:i,dispatch:o},{visitorId:a}){const r=Object(n.a)(o),s=yield r("context/fetchVisitorJWT",i.context),c=yield t.getVisitorIncentives(a,s);e("setIncentives",null===c||void 0===c?void 0:c.incentives)}));return function(t,i){return e.apply(this,arguments)}}(),setSelectedDestination:function(){var e=o.a((function*({commit:e,state:i},{locationId:o,index:n,collectionIds:a,name:r,imageUrl:s}){const c=JSON.parse(JSON.stringify(i.selectedDestinations));try{const e=yield t.getLocationInfo(o,a);c[n]=e}catch(l){c[n]={name:null!==r&&void 0!==r?r:"",id:null!==o&&void 0!==o?o:0,imageUrl:null!==s&&void 0!==s?s:""}}e("updateSelectedDestinations",c)}));return function(t,i){return e.apply(this,arguments)}}(),removeSelectedDestination:function(){var t=o.a((function*({commit:t,state:e},{index:i}){const o=JSON.parse(JSON.stringify(e.selectedDestinations));o[i]=null,t("updateSelectedDestinations",o)}));return function(e,i){return t.apply(this,arguments)}}(),submitSelectedDestinations:({state:e},i)=>{const o=e.selectedDestinations.flatMap(t=>t?[t.id]:[]);return t.submitSelectedDestinations(i,o)}}),c={setIncentive(t,e){t.incentive=e},setIncentives(t,e){t.incentives=e},updateSelectedDestinations(t,e){t.selectedDestinations=e}},l={incentive:t=>t.incentive,incentives:t=>t.incentives,selectedDestinations:t=>t.selectedDestinations};function d(t){return{namespaced:!0,state:r,getters:l,actions:s(new a.a(t)),mutations:c}}},191:function(t,e,i){"use strict";i.d(e,"a",(function(){return v}));var o=i(6),n=i(9),a=i(192),r=i(64);const s={firstName:"",lastName:"",email:"",phone:"",hash:"",birthDate:[0,0,0]},c={street:"",addressSuffix:"",zip:"",city:"",state:"",country:null,phone:""},l=()=>({customer:s,address:c,passwordIsSet:!1,countries:[],paymentInfos:[]}),d=t=>({sendPasswordReset:function(){var e=o.a((function*(e,{email:i}){return yield t.sendPasswordReset(i)}));return function(t,i){return e.apply(this,arguments)}}(),resetPassword:function(){var e=o.a((function*(e,{cid:i,code:o,password:n}){yield t.resetPassword(i,o,n)}));return function(t,i){return e.apply(this,arguments)}}(),getPasswordInfo:function(){var e=o.a((function*({commit:e,rootState:i}){const{id:o}=i.auth.customer,{isSet:n}=yield t.getPasswordInfo(o);e("setPasswordIsSet",n)}));return function(t){return e.apply(this,arguments)}}(),setPassword:function(){var e=o.a((function*({rootState:e},{oldPassword:i,newPassword:o}){const{id:n}=e.auth.customer;return yield t.setPassword(n,i,o)}));return function(t,i){return e.apply(this,arguments)}}(),getProfile:function(){var e=o.a((function*({commit:e,rootState:i}){const{id:o}=i.auth.customer;if(!o)throw new r.a("Unauthorized user for this endpoint.",i.route.fullPath);const a=yield t.getProfile(o),{phone:s}=yield t.getAddress(o);e("setCustomer",n.a({},a,{phone:s}))}));return function(t){return e.apply(this,arguments)}}(),saveProfile:function(){var e=o.a((function*({state:e,rootState:i}){const{id:o}=i.auth.customer;yield t.saveProfile(o,e.customer),yield t.saveAddress(o,{phone:e.customer.phone})}));return function(t){return e.apply(this,arguments)}}(),resendValidationEmail:function(){var e=o.a((function*({rootState:e}){const{id:i}=e.auth.customer;yield t.resendValidationEmail(i)}));return function(t){return e.apply(this,arguments)}}(),getPaymentInfos:function(){var e=o.a((function*({commit:e,rootState:i}){const{id:o}=i.auth.customer;if(!o)throw new r.a("Unauthorized user for this endpoint.",i.route.fullPath);e("setPaymentInfos",yield t.getPaymentInfos(o))}));return function(t){return e.apply(this,arguments)}}(),getAddress:function(){var e=o.a((function*({commit:e,rootState:i}){const{id:o}=i.auth.customer;if(!o)throw new r.a("Unauthorized user for this endpoint.",i.route.fullPath);e("setAddress",yield t.getAddress(o))}));return function(t){return e.apply(this,arguments)}}(),getCountries:function(){var e=o.a((function*({commit:e}){e("setCountries",yield t.getCountries())}));return function(t){return e.apply(this,arguments)}}(),deletePaymentInfo:function(){var e=o.a((function*({commit:e,rootState:i},{paymentCardId:o}){const{id:n}=i.auth.customer;if(!n)throw new r.a("Unauthorized user for this endpoint.",i.route.fullPath);yield t.deletePaymentInfo(n,o),e("deletePaymentInfo",o)}));return function(t,i){return e.apply(this,arguments)}}(),saveAddress:function(){var e=o.a((function*({state:e,rootState:i}){const{id:o}=i.auth.customer;return yield t.saveAddress(o,e.address)}));return function(t){return e.apply(this,arguments)}}()}),u={paymentInfos:t=>t.paymentInfos,customerEmail:t=>{var e;return null===(e=t.customer)||void 0===e?void 0:e.email},customerPhone:t=>{var e;return null===(e=t.customer)||void 0===e?void 0:e.phone},customerProfile:t=>t.customer},m={setCustomer:(t,e)=>{t.customer=e},setPasswordIsSet:(t,e)=>{t.passwordIsSet=e},setCountries:(t,e)=>{t.countries=e},setAddress:(t,e)=>{t.address=e},setPaymentInfos:(t,e)=>{t.paymentInfos=e},deletePaymentInfo:(t,e)=>{const i=t.paymentInfos.filter(t=>t.paymentCardId!==e);t.paymentInfos=i}};function v(t){return{namespaced:!0,state:l,actions:d(new a.a(t)),getters:u,mutations:m}}},205:function(t,e,i){"use strict";var o,n=i(9),a=i(10),r=i(66),s=i(87),c=i(6);!function(t){t.SET_SEO_LINK="SET_SEO_LINK",t.SET_SEO_LINK_ERROR="SET_SEO_LINK_ERROR",t.SET_TOP_CITIES="SET_TOP_CITIES",t.SET_TOP_CITIES_ERROR="SET_TOP_CITIES_ERROR",t.SET_TOP_POIS="SET_TOP_POIS",t.SET_HISTORY="SET_HISTORY",t.SET_HOME_RECOMMENDATIONS="SET_HOME_RECOMMENDATIONS",t.SET_HERO="SET_HERO",t.SET_HOME_UNFORGETTABLE_PICKS="SET_HOME_UNFORGETTABLE_PICKS",t.SET_HOME_DESTINATIONS="SET_HOME_DESTINATIONS",t.SET_HOME_EXPERT_PICKS="SET_HOME_EXPERT_PICKS",t.SET_IS_LOADING_HOME_EXPERT_PICKS="SET_IS_LOADING_HOME_EXPERT_PICKS",t.SET_HOME_ITINERARIES="SET_HOME_ITINERARIES",t.SET_HOME_VIDEO="SET_HOME_VIDEO",t.SET_HOME_BENEFITS="SET_HOME_BENEFITS",t.SET_HOME_REVIEWS="SET_HOME_REVIEWS",t.SET_HOME_NEARBY_LOCATIONS="SET_HOME_NEARBY_LOCATIONS"}(o||(o={}));var l=i(3);function d(t){const{SET_SEO_LINK:e,SET_SEO_LINK_ERROR:i,SET_HISTORY:n,SET_TOP_CITIES:a,SET_TOP_CITIES_ERROR:r,SET_TOP_POIS:s,SET_HOME_RECOMMENDATIONS:d,SET_HERO:u,SET_HOME_NEARBY_LOCATIONS:m,SET_HOME_UNFORGETTABLE_PICKS:v,SET_HOME_DESTINATIONS:E,SET_HOME_EXPERT_PICKS:p,SET_HOME_ITINERARIES:h,SET_HOME_VIDEO:S,SET_HOME_BENEFITS:f,SET_HOME_REVIEWS:g}=o,T=(t,e)=>{l.a.error({error:e},"Missing Home section: "+t)};return{fetchSeoLinks:function(){var o=c.a((function*({commit:o}){try{const i=yield t.fetchSeoLinks(),{data:n}=i;return o(e,n),i}catch(n){return o(i,!0),T("seoLinks",n),null}}));return function(t){return o.apply(this,arguments)}}(),fetchTopCities:function(){var e=c.a((function*({commit:e},i){try{const o=yield t.fetchTopCities(i);return e(a,o.topCities),o}catch(o){return e(r,!0),T("TopCities",o),null}}));return function(t,i){return e.apply(this,arguments)}}(),fetchTopPois:function(){var e=c.a((function*({commit:e},i){try{var o;const a=yield t.fetchTopPois(i);var n;if(null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.topPois)e(s,null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.topPois);return a}catch(a){return T("TopPois",a),null}}));return function(t,i){return e.apply(this,arguments)}}(),fetchHomeComponents:function(){var e=c.a((function*({commit:e}){try{var i;const L=yield t.fetchHomeComponents(),D=null===L||void 0===L||null===(i=L.data)||void 0===i?void 0:i.components;if(D){var o,a,r,s,c,l,m,T,I,R,_,y;if((null===D||void 0===D?void 0:D.hero)&&e(u,D.hero),(null===(o=null===D||void 0===D?void 0:D.unforgettablePicks.items)||void 0===o?void 0:o.length)&&e(v,D.unforgettablePicks),(null===(a=null===D||void 0===D?void 0:D.destinations.items)||void 0===a?void 0:a.length)&&e(E,D.destinations),(null===(r=null===D||void 0===D?void 0:D.expertPicks.items)||void 0===r?void 0:r.length)&&e(p,D.expertPicks),(null===D||void 0===D||null===(s=D.companionContent)||void 0===s||null===(c=s.companionContentItems)||void 0===c?void 0:c.length)&&e(h,D.companionContent),(null===D||void 0===D||null===(l=D.video)||void 0===l?void 0:l.url)&&e(S,D.video),(null===D||void 0===D||null===(m=D.benefits)||void 0===m?void 0:m.length)&&e(f,D.benefits),(null===D||void 0===D||null===(T=D.reviews)||void 0===T?void 0:T.reviews)&&e(g,D.reviews),null===(I=null===D||void 0===D?void 0:D.returningVisitor.history)||void 0===I||null===(R=I.activities)||void 0===R?void 0:R.length){var A;const t={activities:D.returningVisitor.history.activities.slice(-2),uuid:null!==(A=D.returningVisitor.history.uuid)&&void 0!==A?A:""};e(n,t)}if(null===(_=null===D||void 0===D?void 0:D.returningVisitor.recommendation)||void 0===_||null===(y=_.activities)||void 0===y?void 0:y.length){var O,C;const t={activities:D.returningVisitor.recommendation.activities.slice(-4),uuid:null!==(C=null===(O=D.returningVisitor.recommendation)||void 0===O?void 0:O.uuid)&&void 0!==C?C:""};e(d,t)}}return L}catch(L){return null}}));return function(t){return e.apply(this,arguments)}}(),fetchNearbyLocations:function(){var e=c.a((function*({commit:e}){try{var i;const o=yield t.fetchNearbyLocations();return(null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.data)&&e(m,o.data.data),o}catch(o){return null}}));return function(t){return e.apply(this,arguments)}}()}}var u={seoLinks:t=>t.seoLinks,history:t=>t.homeV2.returningVisitor.history,homeRecommendations:t=>t.homeV2.returningVisitor.recommendation,topCities:t=>t.topCities,topPois:t=>t.topPois,locationsData:t=>t.locationsData,hero:t=>t.hero,unforgettablePicks:t=>t.homeV2.unforgettablePicks,destinations:t=>t.homeV2.destinations,topSights:t=>t.topSights,expertPicks:t=>t.homeV2.expertPicks,itineraries:t=>t.homeV2.itineraries,video:t=>t.homeV2.video,benefitsV2:t=>t.homeV2.benefits,isLoadingExpertPicks:t=>t.homeV2.isLoadingExpertPicks,reviews:t=>t.reviews};const{SET_SEO_LINK:m,SET_SEO_LINK_ERROR:v,SET_TOP_CITIES:E,SET_TOP_CITIES_ERROR:p,SET_TOP_POIS:h,SET_HISTORY:S,SET_HOME_RECOMMENDATIONS:f,SET_HERO:g,SET_HOME_UNFORGETTABLE_PICKS:T,SET_HOME_DESTINATIONS:I,SET_HOME_EXPERT_PICKS:R,SET_IS_LOADING_HOME_EXPERT_PICKS:_,SET_HOME_ITINERARIES:y,SET_HOME_VIDEO:A,SET_HOME_BENEFITS:O,SET_HOME_NEARBY_LOCATIONS:C,SET_HOME_REVIEWS:L}=o;var D={[m](t,e){t.seoLinks.seoLinks=e},[v](t,e){t.seoLinks.hasError=e},[E](t,e){t.topCities.topCities=e},[p](t,e){t.topCities.hasError=e},[h](t,e){t.topPois=e},[S](t,e){t.homeV2.returningVisitor.history=e},[f](t,e){t.homeV2.returningVisitor.recommendation=e},[g](t,e){t.hero=e},[T](t,e){t.homeV2.unforgettablePicks=e},[I](t,e){t.homeV2.destinations=e},[C](t,e){t.topSights=e},[R](t,e){t.homeV2.expertPicks=e},[y](t,e){t.homeV2.itineraries=e},[A](t,e){t.homeV2.video=e},[_](t,e){t.homeV2.isLoadingExpertPicks=e},[O](t,e){t.homeV2.benefits=e},[L](t,e){t.reviews=e}},N=i(107);const b=()=>({seoLinks:{seoLinks:{},hasError:!1},topCities:{topCities:[],hasError:!1},topPois:[],hero:null,locationsData:{},topSights:null,reviews:null,homeV2:{unforgettablePicks:null,destinations:null,expertPicks:null,isLoadingExpertPicks:!1,isLoadingTopSights:!1,itineraries:null,video:null,benefits:null,returningVisitor:{history:{activities:[],uuid:""},recommendation:{activities:[],uuid:""}}}});function w(t){return{namespaced:!0,state:b,actions:d(new N.a(t)),getters:u,mutations:D}}var P,M,U,F,k,H,G;function x(t){const{SET_THEMES:e,SET_HERO_BANNER:i,SET_ACTIVITY_CARD_COLLECTION:o,SET_TRIP_ITEMS:n,SET_DESTINATIONS:a,SET_ID:r,SET_NAME:s,SET_THEMES_CONTENT:d}=P;return{fetchInitialThemeContent:function(){var d=c.a((function*({commit:c},d){try{var u,m;const l=yield t.fetchInitialThemeContent(d);if((null===l||void 0===l||null===(u=l.data)||void 0===u?void 0:u.theme)&&(null===l||void 0===l||null===(m=l.data)||void 0===m?void 0:m.themes)){var v,E,p;c(e,null===l||void 0===l||null===(v=l.data)||void 0===v?void 0:v.themes);const t=null===l||void 0===l||null===(E=l.data)||void 0===E?void 0:E.theme,d=null===l||void 0===l||null===(p=l.data)||void 0===p?void 0:p.themes.find(e=>e.id===t.id);var h;const u=null!==(h=t.heroBanner)&&void 0!==h?h:d.heroBanner;var S,f,g,T,I;if(t)u&&c(i,u),(null===(S=null===t||void 0===t?void 0:t.activityCardCollection.items)||void 0===S?void 0:S.length)&&c(o,t.activityCardCollection),(null===(f=null===t||void 0===t?void 0:t.destinations.items)||void 0===f?void 0:f.length)&&c(a,t.destinations),(null===(g=null===t||void 0===t?void 0:t.tripItems.data)||void 0===g?void 0:g.length)&&c(n,t.tripItems),(null===t||void 0===t||null===(T=t.id)||void 0===T?void 0:T.length)&&c(r,t.id),(null===t||void 0===t||null===(I=t.name)||void 0===I?void 0:I.length)&&c(s,t.name)}return l}catch(R){return l.a.error({error:R},"Missing Home Components!"),null}}));return function(t,e){return d.apply(this,arguments)}}(),fetchThemesContent:function(){var e=c.a((function*({commit:e},i){try{var o;const a=yield t.fetchThemesContent(i);var n;if(null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.themes)e(d,null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.themes);return a}catch(a){return l.a.error({error:a},"Missing Home Components!"),null}}));return function(t,i){return e.apply(this,arguments)}}(),updateCurrentThemeContent:({commit:t},e)=>{try{var c,d,u,m,v;if(e)(null===e||void 0===e?void 0:e.heroBanner)&&t(i,e.heroBanner),(null===(c=null===e||void 0===e?void 0:e.activityCardCollection.items)||void 0===c?void 0:c.length)&&t(o,e.activityCardCollection),(null===(d=null===e||void 0===e?void 0:e.destinations.items)||void 0===d?void 0:d.length)&&t(a,e.destinations),(null===(u=null===e||void 0===e?void 0:e.tripItems.data)||void 0===u?void 0:u.length)&&t(n,e.tripItems),(null===e||void 0===e||null===(m=e.id)||void 0===m?void 0:m.length)&&t(r,e.id),(null===e||void 0===e||null===(v=e.name)||void 0===v?void 0:v.length)&&t(s,e.name)}catch(E){l.a.error({error:E},"Missing Home Components!")}}}}!function(t){t.SET_THEMES="SET_THEMES",t.SET_HERO_BANNER="SET_HERO_BANNER",t.SET_ACTIVITY_CARD_COLLECTION="SET_ACTIVITY_CARD_COLLECTION",t.SET_TRIP_ITEMS="SET_TRIP_ITEMS",t.SET_DESTINATIONS="SET_DESTINATIONS",t.SET_ID="SET_ID",t.SET_NAME="SET_NAME",t.SET_THEMES_CONTENT="SET_THEMES_CONTENT"}(P||(P={}));var B={themes:t=>t.themes,heroBanner:t=>null!==(M=t.heroBanner)&&void 0!==M?M:null,activityCardCollection:t=>null!==(U=t.activityCardCollection)&&void 0!==U?U:null,tripItems:t=>null!==(F=t.tripItems)&&void 0!==F?F:null,id:t=>null!==(k=t.id)&&void 0!==k?k:"",name:t=>null!==(H=t.name)&&void 0!==H?H:"",destinations:t=>null!==(G=t.destinations)&&void 0!==G?G:null,themesContent:t=>t.themesContent};const{SET_THEMES:j,SET_HERO_BANNER:V,SET_ACTIVITY_CARD_COLLECTION:W,SET_TRIP_ITEMS:q,SET_DESTINATIONS:z,SET_ID:Q,SET_NAME:K,SET_THEMES_CONTENT:Y}=P;var J={[j](t,e){t.themes=e},[V](t,e){t.heroBanner=e},[W](t,e){t.activityCardCollection=e},[q](t,e){t.tripItems=e},[z](t,e){t.destinations=e},[Q](t,e){t.id=e},[K](t,e){t.name=e},[Y](t,e){t.themesContent=e}};const $=()=>({themes:[{name:"",id:"",heroBanner:null}],name:"",id:"",heroBanner:null,activityCardCollection:null,destinations:null,tripItems:null,themesContent:[{name:"",id:"",heroBanner:null,activityCardCollection:{title:"",items:[]},destinations:{title:"",items:[],locationIdList:[]},tripItems:{title:"",data:[]}}]});function X(t){return{namespaced:!0,state:$,actions:x(new N.a(t)),getters:B,mutations:J}}var Z;!function(t){t.SET_CONTENT="SET_CONTENT"}(Z||(Z={}));var tt=i(32),et=i.n(tt),it=i(46);function ot(t){const{SET_CONTENT:e}=Z,i=()=>new it.a({message:"OriginalsPage",apiEndpoint:"/pages/originals"});return{fetchOriginalsPageContent:function(){var o=c.a((function*({commit:o}){try{const n=yield t.fetchOriginalsPageContent();if(et()(n))throw i();return o(e,n),n}catch(n){throw i()}}));return function(t){return o.apply(this,arguments)}}()}}var nt={content:t=>t.content};const{SET_CONTENT:at}=Z;var rt={[at](t,e){t.content=e}},st=i(193);const ct=()=>({content:{hero:{header:"",intro:"",image:"",jumpLinks:[]},video:{caption:"",header:"",video:""},slider:{header:"",image:"",usps:[]},information:{header:"",tabs:[]},featuredGuides:{header:"",subHeader:"",guides:[]},locations:[]}});function lt(t){return{namespaced:!0,state:ct,actions:ot(new st.a(t)),getters:nt,mutations:rt}}var dt,ut={isLoading:t=>t.isLoading,components:t=>t.campaign.components,seoContent:t=>({title:t.campaign.pageTitle,description:t.campaign.metaDescription,url:t.campaign.url,alternateUrls:t.campaign.alternateUrls,sharingImage:t.campaign.sharingImage})};!function(t){t.SET_IS_LOADING="SET_IS_LOADING",t.SET_CAMPAIGN="SET_CAMPAIGN"}(dt||(dt={}));var mt=i(27);function vt(t){const e=(t,e)=>{throw l.a.error({error:e},"[CAMPAIGN_BUILDER] "+t),new mt.a("/not-found",404)};return{fetchCampaign:({commit:i},o)=>{const{SET_IS_LOADING:n,SET_CAMPAIGN:a}=dt;if(!/^[\w|-]+$/.test(o))throw i(n,!1),new mt.a("/not-found",404);return i(n,!0),t.fetchCampaign(o).then(t=>{var e,o,n;if(!(null!==(n=(null===t||void 0===t||null===(e=t.campaign)||void 0===e||null===(o=e.components)||void 0===o?void 0:o.length)>0)&&void 0!==n&&n))throw new it.a;i(a,t.campaign)}).catch(t=>{"MissingPageDataError"===t.name?e(`Missing components on the ${o} campaign.`,t):t.response?e(`Response error on the ${o} campaign.`,t):t.request?e(`Request error on the ${o} campaign.`,t):e(`Something went wrong with the ${o} campaign.`,t)}).finally(()=>{i(n,!1)})}}}const{SET_IS_LOADING:Et,SET_CAMPAIGN:pt}=dt;var ht={[Et](t,e){t.isLoading=e},[pt](t,e){t.campaign=e}},St=i(194);const ft=()=>({isLoading:!1,campaign:{components:[],pageTitle:"",url:"",metaDescription:"",alternateUrls:[],sharingImage:""}});function gt(t){return{namespaced:!0,state:ft,actions:vt(new St.a(t)),getters:ut,mutations:ht}}var Tt,It={customerId:t=>t.customerId};function Rt(){const{SET_CUSTOMER_ID:t}=Tt;return{setCustomerId:({commit:e},i)=>{e(t,i)}}}!function(t){t.SET_CUSTOMER_ID="SET_CUSTOMER_ID"}(Tt||(Tt={}));const{SET_CUSTOMER_ID:_t}=Tt;var yt={[_t](t,e){t.customerId=e}};const At=()=>({customerId:-1});a.default.use(r.b);e.a=(t,e,i,o)=>{const a=function(t,e,i,o){return n.a({},Object(s.a)(t,e,i,o),{homePage:w(t),newHomePage:X(t),originalsPage:lt(t),campaign:gt(t),nextDestination:{namespaced:!0,state:At,actions:Rt(),getters:It,mutations:yt}})}(t,e,i,o);return new r.b.Store({modules:a,getters:s.b,state:s.d,mutations:s.c})}},206:function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var o=i(50),n=i(6),a=i(9),r=i(23),s=i(14),c=i(3);const l=t=>{var e;const i=null!==(e=null===t||void 0===t?void 0:t.toLowerCase())&&void 0!==e?e:"unknown";return i.includes("timeout")?"timeout":i.includes("network error")?"network-error":i.includes("request aborted")?"request-aborted":i};var d=(t,e)=>t.map(t=>t.name===e.categoryName?a.a({},t,{channels:t.channels.map(t=>t.name===e.channelName?a.a({},t,{isEnabled:t.isReadOnly?t.isEnabled:e.isEnabled}):t)}):t);var u=t=>t.permissions.map(t=>{const e=t.category.channels.map(t=>({description:t.description,name:t.name,title:t.title,isEnabled:t.permission.is_enabled,isReadOnly:t.is_read_only}));return{description:t.category.description,name:t.category.name,title:t.category.title,channels:e}});var m={setEmail:(t,e)=>{t.email=e},setPermissions:(t,e)=>{t.permissions=e},setHasAppInstalled:(t,e)=>{t.hasAppInstalled=e}},v={email:t=>t.email,permissions:t=>t.permissions,hasAppInstalled:t=>t.hasAppInstalled};const E=()=>({email:"",permissions:[],hasAppInstalled:null});function p(t){return{namespaced:!0,state:E,actions:(e=new o.b(t),{getAppInstalled:function(){var t=n.a((function*({commit:t,rootState:i}){const{id:o}=i.auth.customer;try{const i=yield e.getAuthenticatedPreferences(o),n=u(i).some(t=>t.channels.some(t=>"app_push"===t.name));return t("setHasAppInstalled",n),n}catch(a){var n;const t=(null===a||void 0===a||null===(n=a.response)||void 0===n?void 0:n.status)||(null===a||void 0===a?void 0:a.statusCode),e=l(null===a||void 0===a?void 0:a.message);return 302===t&&"session-cookie-expired"===e||401===t||"UnauthorizedUser"===a.name||"UnauthorizedUserError"===a.type||(c.a.error({error:a,customerId:o,reason:e,status:t},"App permissions couldn't be fetched"),s.a.increment("communication_preferences.get_app_permissions_failure",{status:t,reason:e})),!1}}));return function(e){return t.apply(this,arguments)}}(),getPermissionsSigned:function(){var t=n.a((function*({commit:t,rootState:i}){const{id:o}=i.auth.customer;try{const i=yield e.getAuthenticatedPreferences(o);t("setPermissions",u(i))}catch(a){var n;const t=(null===a||void 0===a||null===(n=a.response)||void 0===n?void 0:n.status)||(null===a||void 0===a?void 0:a.statusCode),e=l(null===a||void 0===a?void 0:a.message);if(302===t&&"session-cookie-expired"===e)throw a;c.a.error({error:a,customerId:o,reason:e,status:t},"Signed in customer communication permissions couldn't be fetched"),s.a.increment("communication_preferences.get_permissions_signed_failure",{status:t,reason:e})}}));return function(e){return t.apply(this,arguments)}}(),setPermission:function(){var t=n.a((function*({commit:t,state:e},i){const{permissions:o}=e;t("setPermissions",d(o,i))}));return function(e,i){return t.apply(this,arguments)}}(),sendPermissions:function(){var t=n.a((function*({state:t,rootState:i}){try{const{permissions:o}=t,n=[];o.forEach(t=>t.channels.forEach(e=>n.push({categoryName:t.name,channelName:e.name,isEnabled:e.isEnabled})));const{id:a}=i.auth.customer;return yield e.setAuthenticatedPreferences(a,n),s.a.increment("communication_preferences.send_permissions_success"),!0}catch(n){var o;const t=null===n||void 0===n||null===(o=n.response)||void 0===o?void 0:o.status;return c.a.error({error:n},"Customer communication permissions failed to be sent."),s.a.increment("communication_preferences.send_permissions_failure",{status:t}),!1}}));return function(e){return t.apply(this,arguments)}}(),subscribe:function(){var t=n.a((function*({rootState:t},{source:i,containerName:o}){const n={source:i,containerName:o};try{const{id:i}=t.auth.customer;return yield e.setAuthenticatedPreferences(i,[{categoryName:"newsletter",channelName:"email",isEnabled:!0},{categoryName:"action_based",channelName:"email",isEnabled:!0}],n),s.a.increment("communication_preferences.subscribe_success"),!0}catch(l){var r;c.a.error({error:l},"Customer couldn't be subscribed to marketing emails");const t=null===l||void 0===l||null===(r=l.response)||void 0===r?void 0:r.status;return s.a.increment("communication_preferences.subscribe_failure",a.a({status:t},n)),!1}}));return function(e,i){return t.apply(this,arguments)}}(),getEmailSoftOptinEligible:function(){var t=n.a((function*({rootState:t,dispatch:i},o){const{visitorId:n}=t.context,a=encodeURIComponent(o),c=Object(r.a)(i),l=yield c("context/fetchVisitorJWT",t.context),d=yield e.isVisitorSoftinEligible(a,l,n);return s.a.increment("soft_opt_in_check",{isEligible:d,type:"email"}),d}));return function(e,i){return t.apply(this,arguments)}}(),getCustomerSoftOptinEligible:function(){var t=n.a((function*({rootState:t}){var i,o;const n=null===t||void 0===t||null===(i=t.auth)||void 0===i||null===(o=i.customer)||void 0===o?void 0:o.id;if(!n)return!1;const a=yield e.isCustomerSoftinEligible(n);return s.a.increment("soft_opt_in_check",{isEligible:a,type:"customer"}),a}));return function(e){return t.apply(this,arguments)}}()}),getters:v,mutations:m};var e}},207:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var o,n=i(6);!function(t){t.SET_REDEEM_CODE="SET_REDEEM_CODE"}(o||(o={}));var a=i(3),r=i(45),s=i(55);function c(t,e,i){const{SET_REDEEM_CODE:c}=o,l=(t,e)=>{a.a.error({error:e},"Missing promotions section: "+t)};return{applyPromotion:function(){var t=n.a((function*({dispatch:t},{promoCode:e,partnerHash:i,cmp:o}){try{let n=!1;return e&&(n=yield t("validateAndApplyCEPromotion",e)),i&&!n&&(n=yield t("validateAndApplyPartnerPromotion",{partnerHash:i,cmp:o})),n}catch(n){return l("RedeemCodeValidationFailed",n),yield t("resetPromotionsState"),!1}}));return function(e,i){return t.apply(this,arguments)}}(),validateAndApplyCEPromotion:function(){var t=n.a((function*({dispatch:t},e){const i=e.replace("?partner_id=3F441","");return yield t("applyRedeemCode",{promotionType:s.a.CustomerEngagementPromotion,promotionCode:i})}));return function(e,i){return t.apply(this,arguments)}}(),validateAndApplyPartnerPromotion:function(){var t=n.a((function*({dispatch:t},{partnerHash:e,cmp:o}){const n=yield i.getPartnerPromotion(e,o);if(n){const{promoCode:i,promoMessage:a}=n,c=yield t("applyRedeemCode",{promotionType:s.a.PartnerPromotion,promotionCode:i,cmp:o,promotionMessage:a});return Object(r.g)({partnerHash:e,cmp:o}),c}return!1}));return function(e,i){return t.apply(this,arguments)}}(),applyRedeemCode:function(){var i=n.a((function*({commit:i,dispatch:o,rootGetters:n},{promotionCode:a,promotionMessage:s,promotionType:d}){try{var u;const o=n["context/partnerSession"],l=yield t.getShoppingCartHashAndCreateIfNotExists(o),v=yield e.getShoppingCart(l),E=null===(u=v.redeemedCodes)||void 0===u?void 0:u.find(t=>t.giftCardHash===a||t.giftCardHashFormatted===a);if(E)Object(r.i)(v),Object(r.h)(d),i(c,{isRedeemedCodeApplied:!0,isRedeemedCodeInvalid:!1,redeemCodeExpiryDate:E.dateOfExpiry,promotionMessage:s,promotionType:d});else{var m;Object(r.h)(d);const t=yield e.redeemCodeForShoppingCart(l,a,o,n["auth/isLoggedIn"]),u=null===(m=t.redeemedCodes)||void 0===m?void 0:m.find(t=>t.giftCardHash===a||t.giftCardHashFormatted===a);i(c,{isRedeemedCodeApplied:!0,isRedeemedCodeInvalid:!1,redeemCodeExpiryDate:null===u||void 0===u?void 0:u.dateOfExpiry,promotionMessage:s,promotionType:d}),u?Object(r.i)(t):Object(r.f)()}return!0}catch(v){return l("RedeemCodeApplyFailed",v),yield o("resetPromotionsState"),!1}}));return function(t,e){return i.apply(this,arguments)}}(),resetPromotionsState:function(){var t=n.a((function*({commit:t}){t(c,{isRedeemedCodeApplied:!1,isRedeemedCodeInvalid:!0,redeemCodeExpiryDate:null,promotionMessage:null,promotionType:s.a.None}),Object(r.f)(),Object(r.e)(),Object(r.d)()}));return function(e){return t.apply(this,arguments)}}()}}var l={isRedeemedCodeApplied:t=>t.isRedeemedCodeApplied,isRedeemedCodeInvalid:t=>t.isRedeemedCodeInvalid,redeemCodeExpiryDate:t=>t.redeemCodeExpiryDate,promotionType:t=>t.promotionType,promotionMessage:t=>t.promotionMessage};const{SET_REDEEM_CODE:d}=o;var u={[d](t,e){const{isRedeemedCodeApplied:i,redeemCodeExpiryDate:o,isRedeemedCodeInvalid:n,promotionMessage:a,promotionType:r}=e;t.isRedeemedCodeInvalid=n,t.isRedeemedCodeApplied=i,t.redeemCodeExpiryDate=o,t.promotionMessage=a,t.promotionType=r}},m=i(72),v=i(69),E=i(171);const p=()=>({isRedeemedCodeApplied:!1,isRedeemedCodeInvalid:!1,redeemCodeExpiryDate:null,promotionType:s.a.None,promotionMessage:null});function h(t,e){return{namespaced:!0,state:p,actions:c(new v.a(t,e),new m.a(t),new E.a(t)),getters:l,mutations:u}}},208:function(t,e,i){"use strict";var o;function n(){const{SET_MESSAGE:t,UNSET_MESSAGE:e}=o;return{setMessage:({commit:e},i)=>{e(t,i)},unsetMessage:({commit:t})=>{t(e)}}}i.d(e,"a",(function(){return d})),function(t){t.SET_MESSAGE="SET_MESSAGE",t.UNSET_MESSAGE="UNSET_MESSAGE"}(o||(o={}));var a={message:t=>t.message};const{SET_MESSAGE:r,UNSET_MESSAGE:s}=o;var c={[r](t,e){t.message=e},[s](t){t.message=""}};const l=()=>({message:""});function d(){return{namespaced:!0,state:l,actions:n(),getters:a,mutations:c}}},209:function(t,e,i){"use strict";var o;function n(){const{SET_NOTIFICATION_MESSAGE:t,HIDE_NOTIFICATION_MESSAGE:e}=o;return{setNotificationMessage:({commit:e},i)=>{e(t,i)},hideNotificationMessage:({commit:t})=>{t(e)}}}i.d(e,"b",(function(){return d})),i.d(e,"a",(function(){return u})),function(t){t.SET_NOTIFICATION_MESSAGE="SET_NOTIFICATION_MESSAGE",t.HIDE_NOTIFICATION_MESSAGE="HIDE_NOTIFICATION_MESSAGE"}(o||(o={}));const{SET_NOTIFICATION_MESSAGE:a,HIDE_NOTIFICATION_MESSAGE:r}=o;var s={[a](t,e){t.notificationMessage=e},[r](t){t.notificationMessage=u.NONE}},c={message:t=>t.notificationMessage};const l=()=>({notificationMessage:u.NONE});function d(){return{namespaced:!0,state:l,actions:n(),getters:c,mutations:s}}var u;!function(t){t.NONE="NONE",t.PROFILE_SAVED_SUCCESSFULLY="PROFILE_SAVED_SUCCESSFULLY",t.SAVED_SUCCESSFULLY="SAVED_SUCCESSFULLY",t.SAVED_ERROR="SAVED_ERROR",t.VALIDATION_EMAIL_SENT="VALIDATION_EMAIL_SENT",t.VALIDATION_EMAIL_FAILED="VALIDATION_EMAIL_FAILED"}(u||(u={}))},210:function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var o,n=i(6);!function(t){t.SET_IS_LOADING="SET_IS_LOADING",t.SET_IS_SUCCESSFUL="SET_IS_SUCCESSFUL",t.SET_MARKETING_ENABLED="SET_MARKETING_ENABLED",t.SET_MARKETING_ENABLED_FETCHED="SET_MARKETING_ENABLED_FETCHED",t.SET_IS_PREVIOUSLY_SUBSCRIBED="SET_IS_PREVIOUSLY_SUBSCRIBED"}(o||(o={}));var a=i(50);function r(t){const{SET_IS_LOADING:e,SET_IS_SUCCESSFUL:i,SET_MARKETING_ENABLED:r,SET_MARKETING_ENABLED_FETCHED:s,SET_IS_PREVIOUSLY_SUBSCRIBED:c}=o;return{postNewsletterSignup:function(){var o=n.a((function*({commit:o,rootState:n},a){const{email:r,containerName:s,widget:l}=a,{customer:d}=n.auth;var u;const m=null!==(u=d.id)&&void 0!==u?u:null;o(e,!0);let v={};try{var E;v=yield t.marketingEmailsSubscribe(r,m,{containerName:s,widget:l,source:"NewsletterComponent"}),(null===(E=v.data)||void 0===E?void 0:E.activeConsent)&&o(c,!0),o(i,!0)}catch(p){throw o(i,!1),o(e,!1),p}return o(e,!1),v}));return function(t,e){return o.apply(this,arguments)}}(),setMarketingEnabled:function(){var e=n.a((function*({commit:e,rootState:i},{categories:o,activeConsent:n,setState:c}={}){try{"undefined"===typeof o&&(o=a.a.All),"undefined"===typeof n&&(n=!0),"undefined"===typeof c&&(c=!0);const{isLoggedIn:d,customer:u}=i.auth;var l;const m=null!==(l=u.id)&&void 0!==l?l:null;if(!d||!m)return!1;const v=yield t.isMarketingEnabled(m,o,n);return c&&(e(r,v),e(s,!0)),v}catch(d){return c&&(e(r,!1),e(s,!0)),!1}}));return function(t){return e.apply(this,arguments)}}(),getMarketingEnabled:function(){var e=n.a((function*({commit:e,rootState:i},{categories:o,activeConsent:n}={}){try{"undefined"===typeof o&&(o=a.a.All),"undefined"===typeof n&&(n=!0);const{isLoggedIn:l,customer:d}=i.auth;var c;const u=null!==(c=d.id)&&void 0!==c?c:null;if(!l||!u)return!1;const m=yield t.isMarketingEnabled(u,o,n);return e(r,m),e(s,!0),m}catch(l){return e(r,!1),e(s,!1),!1}}));return function(t){return e.apply(this,arguments)}}()}}var s={isLoading:t=>t.isLoading,isSuccessful:t=>t.isSuccessful,marketingEnabled:t=>t.marketingEnabled,marketingEnabledFetched:t=>t.marketingEnabledFetched,isPreviouslySubscribed:t=>t.isPreviouslySubscribed};const{SET_IS_LOADING:c,SET_IS_SUCCESSFUL:l,SET_MARKETING_ENABLED:d,SET_MARKETING_ENABLED_FETCHED:u,SET_IS_PREVIOUSLY_SUBSCRIBED:m}=o;var v={[c](t,e){t.isLoading=e},[l](t,e){t.isSuccessful=e},[d](t,e){t.marketingEnabled=e},[u](t,e){t.marketingEnabledFetched=e},[m](t,e){t.isPreviouslySubscribed=e}};const E=()=>({isLoading:!1,isSuccessful:!1,marketingEnabled:!1,marketingEnabledFetched:!1,isPreviouslySubscribed:!1});function p(t){return{namespaced:!0,state:E,actions:r(new a.b(t)),getters:s,mutations:v}}},211:function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var o=i(6),n=i(3),a=i(23),r=i(74),s=i(27),c=i(184),l=i(56);function d(t){return t.itemType===l.a.activity}function u(t,e){try{if(!t||!e)return Promise.resolve(t);var i;const o=(null!==(i=t.shoppingCartItems)&&void 0!==i?i:[]).filter(d),a=o.map(t=>t.activityId);return e.getActivitiesImages(a).then(e=>(o.forEach(t=>{const i=t.activityId,o=e.data.find(t=>t.tour_id===i);if(o&&o.images[0]){const e=o.images[0].urls.template.replace("{extension}","jpg").replace("{format}","[format_id]");t.bookedOption.imageUrl=e}}),Promise.resolve(t))).catch(e=>(n.a.error("Failed to get activity images "+e),Promise.resolve(t)))}catch(o){return n.a.error(o),Promise.resolve(t)}}var m=i(19),v=i(18);function E(t,e,i,l,d){return{getCustomerInformationPage:function(){var r=o.a((function*({rootState:r,commit:l,rootGetters:E},p){const{shoppingCartHashFromUrl:h,referer:S,ticketingBackUrl:f}=p;let g;h&&f?(i.persistTicketingBackUrl(f),g=i.getShoppingCartHashWithOverrideFromUrl(h,S,e)):g=e.getShoppingCartHash();const T=Object(a.a)(l);if(!g)throw new s.a("/shopping-cart",302);return t.getCustomerInformationPageData(g,E["auth/isLoggedIn"]).then(function(){var t=o.a((function*(t){const e=t.shoppingCart;if(!e)throw T("setHasError",!0),n.a.error({shoppingCartHash:g},"CustomerInformationPage cart is missing"),new s.a("/cart",302);var i;if(!(null!==(i=e.shoppingCartItems)&&void 0!==i?i:[]).length)throw T("setHasError",!0),n.a.error({shoppingCartHash:g},"CustomerInformationPage access with empty cart"),new s.a("/cart",302);if(T("setHasError",!1),Object(m.c)(r,v.j,"B")){const i=yield u(e,d);t.shoppingCart=i}return l("SET_CUSTOMER_INFORMATION_DATA",t),Promise.resolve(!0)}));return function(e){return t.apply(this,arguments)}}()).catch(t=>{var e;throw n.a.error({error:t},"CustomerInformationPage get data failed"),409===(null===t||void 0===t?void 0:t.status)&&(null===t||void 0===t||null===(e=t.type)||void 0===e?void 0:e.endsWith(c.a.shoppingCartAlreadyProcessed))?new s.a("/confirmation/"+g,302):new s.a("/shopping-cart",302)})}));return function(t,e){return r.apply(this,arguments)}}(),validateEmail:function(){var e=o.a((function*({commit:e},i){e("SET_EMAIL_VALIDATION",void 0);const o=yield t.validateCustomerEmail(i);o&&e("SET_EMAIL_VALIDATION",o)}));return function(t,i){return e.apply(this,arguments)}}(),submitCustomerInformationData:function(){var e=o.a((function*({state:e,commit:i,rootGetters:o},n){var s,c;const l=Object(a.a)(i);var d;const u=null!==(d=null===(s=e.customerInformationData)||void 0===s||null===(c=s.shoppingCart)||void 0===c?void 0:c.shoppingCartHash)&&void 0!==d?d:null;return u?(n=function(t){var e,i,o,n;return null===(o=null===(i=null===(e=(t=JSON.parse(JSON.stringify(t))).supplierRequestedInformationPerBooking)||void 0===e?void 0:e.flatMap(t=>{var e;return null!==(n=null===(e=t.supplierRequestedInformation)||void 0===e?void 0:e.bookingLevel)&&void 0!==n?n:[]}))||void 0===i?void 0:i.filter(t=>t.identifier===r.a.pickupLocation))||void 0===o||o.forEach(t=>{t.answer&&(t.answer.isLocationConfirmed=void 0,t.answer.selectNowOrLater=void 0)}),t}(n),t.submitCustomerInformation(u,n,o["context/partnerSession"]).then(()=>!0).catch(t=>{var e;if(null===(e=t.violations)||void 0===e?void 0:e.length)return t.violations.forEach(t=>{if(t.field){var e,o;const n=null!==(o=null!==(e=t.messageLocalized)&&void 0!==e?e:t.message)&&void 0!==o?o:"";((t,e,i)=>{const o=t.match(/^customerBillingInformation\.(\w+)\.(\w+)$/);if(o&&3===o.length){const t=o[1],n=o[2];i("SET_CUSTOMER_INFORMATION_FORM_ERROR",{addressType:t,label:"billingDetails"===t&&("firstName"===n||"lastName"===n)?"fullName":n,value:e})}})(t.field,n,i),((t,e,i)=>{const o=t.match(/^supplierRequestedInformationPerBooking\[(\d+)\]\.(travelerLevel|bookingLevel|fallback)(\[(\d+)\])?\.(answersForEachTraveler\[(\d+)\]\.)?(?:answer\.)?(\w+)$/);if(o&&8===o.length){const t=o[7];i("SET_SUPPLIER_REQUESTED_INFORMATION_FORM_ERROR",{bookingIndex:parseInt(o[1]),type:o[2],itemIndex:o[4]?parseInt(o[4]):void 0,travelerIndex:o[6]?parseInt(o[6]):void 0,error:{[t]:e}})}})(t.field,n,i)}}),Promise.resolve(!1);throw t})):(l("setHasError",!0),Promise.resolve(!1))}));return function(t,i){return e.apply(this,arguments)}}(),initiatePayment:function(){var e=o.a((function*({state:e,rootState:i,commit:o},n){var r,s,c;const{paymentMethodIdentifier:l,issuerId:d,recurringDetailReference:u}=n,m=Object(a.a)(o);var v;const E=null!==(v=null===(r=e.customerInformationData)||void 0===r||null===(s=r.shoppingCart)||void 0===s?void 0:s.shoppingCartHash)&&void 0!==v?v:null;return E?t.initiatePaymentRequest(E,l,null===(c=i.auth)||void 0===c?void 0:c.isLoggedIn,d,u).then(t=>t).catch(t=>{throw t}):(m("setHasError",!0),Promise.resolve(!1))}));return function(t,i){return e.apply(this,arguments)}}(),validateApplePayMerchant:function(){var e=o.a((function*(e,i){return t.validateApplePayMerchant(i)}));return function(t,i){return e.apply(this,arguments)}}(),getDataLayer:function(){var t=o.a((function*({commit:t,state:e}){var i,o,n;const a=null!==(n=null===(i=e.customerInformationData)||void 0===i||null===(o=i.shoppingCart)||void 0===o?void 0:o.shoppingCartHash)&&void 0!==n?n:null;return!!a&&l.getDataLayer(a).then(e=>(t("SET_DATA_LAYER",e),!0)).catch(()=>(t("SET_DATA_LAYER",null),!1))}));return function(e){return t.apply(this,arguments)}}(),redeemCode:function(){var e=o.a((function*({rootState:e,commit:i,rootGetters:r},c){const l=Object(a.a)(i);i("SET_IS_REDEEMING_CODE",!0);try{yield t.redeemCodeForShoppingCart(c.shoppingCartHash,c.redeemableCode,r["context/partnerSession"],r["auth/isLoggedIn"]),i("SET_IS_REDEEMING_CODE",!1)}catch(E){const t=E.status;return t>=400&&t<500&&(i("SET_IS_REDEEMING_CODE",!1),i("SET_REDEEM_CODE_ERROR",E.titleLocalized)),Promise.reject(E)}return t.getCustomerInformationPageData(c.shoppingCartHash,r["auth/isLoggedIn"]).then(function(){var t=o.a((function*(t){const o=t.shoppingCart;if(!o)throw l("setHasError",!0),n.a.error({shoppingCartHash:c.shoppingCartHash},"CustomerInformationPage cart is missing"),new s.a("/cart",302);var a;if(!(null!==(a=o.shoppingCartItems)&&void 0!==a?a:[]).length)throw l("setHasError",!0),n.a.error({shoppingCartHash:c.shoppingCartHash},"CustomerInformationPage access with empty cart"),new s.a("/cart",302);return l("setHasError",!1),Object(m.c)(e,v.j,"B")&&(yield u(o,d)),i("SET_CUSTOMER_INFORMATION_DATA",t),Promise.resolve(!0)}));return function(e){return t.apply(this,arguments)}}()).catch(t=>{throw n.a.error({error:t},"CustomerInformationPage get data failed"),new s.a("/shopping-cart",302)})}));return function(t,i){return e.apply(this,arguments)}}(),deleteRedeemableCode:function(){var e=o.a((function*({commit:e,rootGetters:i},o){const r=i["context/partnerSession"],c=Object(a.a)(e);return t.deleteRedeemableCodeFromShoppingCart(o.shoppingCartHash,o.redeemableCode,r,i["auth/isLoggedIn"]).then(()=>t.getCustomerInformationPageData(o.shoppingCartHash,i["auth/isLoggedIn"])).then(t=>{var i,a;return(null!==(a=null===(i=t.shoppingCart)||void 0===i?void 0:i.shoppingCartItems)&&void 0!==a?a:[]).length?(c("setHasError",!1),e("SET_CUSTOMER_INFORMATION_DATA",t),Promise.resolve(!0)):(c("setHasError",!0),n.a.error({shoppingCartHash:o.shoppingCartHash},"CustomerInformationPage access with empty cart"),Promise.resolve(!1))}).catch(t=>{if(n.a.error({error:t},"CustomerInformationPage get data failed"),(null===t||void 0===t?void 0:t.status)<400&&(null===t||void 0===t?void 0:t.status)>=500)throw new s.a("/shopping-cart",302)})}));return function(t,i){return e.apply(this,arguments)}}()}}var p={customerInformationData:t=>t.customerInformationData,emailValidation:t=>t.emailValidation,isLoading:t=>t.isLoading,shoppingCart:t=>{var e;return null===(e=t.customerInformationData)||void 0===e?void 0:e.shoppingCart},customerInformationFormErrors:t=>t.customerInformationFormErrors,supplierRequestedInformationFormErrors:t=>t.supplierRequestedInformationFormErrors,dataLayer:t=>t.dataLayer,isRedeemingCode:t=>t.isRedeemingCode,redeemCodeError:t=>t.redeemCodeError},h=i(9),S={SET_CUSTOMER_INFORMATION_DATA(t,e){t.customerInformationData=e},SET_SHOPPING_CART(t,e){t.customerInformationData&&(t.customerInformationData.shoppingCart=e)},SET_IS_LOADING(t,e){t.isLoading=e},SET_EMAIL_VALIDATION(t,e){t.emailValidation=e},SET_CUSTOMER_INFORMATION_FORM_ERROR(t,e){switch(e.addressType){case"billingDetails":case"travelerDetails":t.customerInformationFormErrors[e.addressType][e.label]=e.value;break;case"paymentDetails":t.customerInformationFormErrors[e.addressType][e.label]=e.value}},SET_SUPPLIER_REQUESTED_INFORMATION_FORM_ERRORS(t,e){t.supplierRequestedInformationFormErrors=e},SET_SUPPLIER_REQUESTED_INFORMATION_FORM_ERROR(t,e){var i;const o=null!==(i=e.bookingIndex)&&void 0!==i?i:0,n=t.supplierRequestedInformationFormErrors[o];switch(e.type){case r.b.bookingLevel:{var a;const t=void 0!==e.itemIndex?null===n||void 0===n?void 0:n.bookingLevel[e.itemIndex]:null===n||void 0===n||null===(a=n.bookingLevel)||void 0===a?void 0:a.find(t=>t.identifier===e.identifier);t&&(t.error=h.a({},t.error,e.error));break}case r.b.travelerLevel:{var s;const t=void 0!==e.itemIndex?null===n||void 0===n?void 0:n.travelerLevel[e.itemIndex]:null===n||void 0===n||null===(s=n.travelerLevel)||void 0===s?void 0:s.find(t=>t.identifier===e.identifier);t&&void 0!==e.travelerIndex&&t.errors.splice(e.travelerIndex,1,h.a({},t.errors[e.travelerIndex],e.error));break}case r.b.fallback:{const t=null===n||void 0===n?void 0:n.fallback;t&&(t.error=e.error);break}}},SET_DATA_LAYER(t,e){t.dataLayer=e},SET_IS_REDEEMING_CODE(t,e){t.isRedeemingCode=e},SET_REDEEM_CODE_ERROR(t,e){t.redeemCodeError=e}},f=i(69),g=i(185),T=i(186),I=i(187),R=i(188);const _=()=>({customerInformationData:null,isLoading:!1,customerInformationFormErrors:{billingDetails:{fullName:null,firstName:null,lastName:null,email:null,phoneNumber:null},travelerDetails:{fullName:null,firstName:null,lastName:null,email:null,phoneNumber:null},paymentDetails:{paymentMethodIdentifier:null,paymentMethodIssuer:null,paymentMethodIdentifierField:null}},supplierRequestedInformationFormErrors:[],dataLayer:null,isRedeemingCode:!1,redeemCodeError:""});function y(t,e){return{namespaced:!0,state:_,getters:p,mutations:S,actions:E(new g.a(t),new f.a(t,e),new T.a(e),new I.a(t),new R.a(t))}}},212:function(t,e,i){"use strict";i.d(e,"a",(function(){return A}));var o=i(99),n=i(9),a=i(6),r=i(23),s=i(90),c=i(77),l=i(85),d=i(33),u=i(26),m=i(266),v=i(3),E=i(82),p=i(12),h=i(28),S=i(95),f=i(44);const g={handler:function(t,{rootState:e,rootGetters:i}){var o;if("boolean"===typeof(null===t||void 0===t?void 0:t.isAxiosError))return t;const a=t&&t.items&&Array.isArray(t.items)&&t.items.length>0,r=t.items.some(t=>t.attributes.some(t=>t.type===h.e.recommendedGuide));if(!a||!r)return t;const s=null===(o=Object(f.a)(null===e||void 0===e?void 0:e.route))||void 0===o?void 0:o.toLowerCase(),c=i["location/locationData"],l=function(t){let e=0;return t.map(t=>t.attributes.some(t=>t.type===h.e.recommendedGuide)&&(e++,e>5)?n.a({},t,{attributes:t.attributes.filter(t=>t.type!==h.e.recommendedGuide)}):t,0)}(function(t,e,i){return t.map((t,o)=>{let a=0;const r=0===o,s=t.attributes.some(t=>t.type===h.a.likelyToSellOut),c=t.attributes.some(t=>t.type===h.e.newActivity);r&&a++,s&&a++,Object(S.c)(t.attributes,e,i)&&a++,c&&a++;return t.attributes.some(t=>t.type===h.e.recommendedGuide)&&a>=2?n.a({},t,{attributes:t.attributes.filter(t=>t.type!==h.e.recommendedGuide)}):t})}(t.items,s,c));return n.a({},t,{items:l})}};function T(t){const e=(t,e,i={})=>{v.a.error(n.a({error:e},i),t+"\n failed")};return{fetchSearchResults:function(){var e=a.a((function*({commit:e,dispatch:i,rootGetters:o,rootState:a},{query:c,size:l,offset:d,searchParams:u}){const v=Object(m.a)();i("setRequestId",{requestId:v});const E=Object(r.a)(e),p=Number(c.searchSource),h=o["availability/dates"],S=o["context/currency"],f=o["context/locale"];let T=void 0;(null===c||void 0===c?void 0:c.reviewRatingRanges)&&"string"===typeof(null===c||void 0===c?void 0:c.reviewRatingRanges)&&(T=Number.parseFloat(null===c||void 0===c?void 0:c.reviewRatingRanges)),Number.isNaN(T)&&(T=void 0);const I=Object(s.c)(n.a({},c,{size:l,offset:d,sortOrder:c.order,sortBy:c.sort,reviewRatingRanges:T}),h,p,u);return t.fetchSearchResults(I,{currency:S,locale:f,requestId:v}).then(t=>g.handler(t,{rootGetters:o,rootState:a})).catch(t=>{throw E("setHasError",!0),e("setIsLoading",!1),t})}));return function(t,i){return e.apply(this,arguments)}}(),fetchTripItemSwimlanesActivities:function(){var e=a.a((function*({commit:e,rootGetters:i,dispatch:o},{query:a}){const c=Object(m.a)();o("setRequestId",{requestId:c});const l=Object(r.a)(e),d=Number(null===a||void 0===a?void 0:a.searchSource),u=i["availability/dates"],v=i["context/currency"],E=i["context/locale"],h=Object(s.c)(n.a({},a,{size:10}),u,d);return t.fetchSearchResults(h,{currency:v,locale:E,requestId:c}).then(t=>{"items"in t&&((null===a||void 0===a?void 0:a[p.c.ENTER_LOCATION])?e("setEnterLocationActivities",t.items):e("setOutsideLocationActivities",t.items))}).catch(t=>{throw l("setHasError",!0),e("setIsLoading",!1),t})}));return function(t,i){return e.apply(this,arguments)}}(),setSearchContext:function(){var t=a.a((function*({commit:t},e){t("setSearchContext",e)}));return function(e,i){return t.apply(this,arguments)}}(),fetchResultsCountOnly:function(){var t=a.a((function*({commit:t,dispatch:i},o){try{t("setIsLoading",!0);const e=yield i("fetchSearchResults",o);t("setIsLoading",!1),t("setResultsCount",e.total)}catch(n){e("search/fetchResultsCountOnly",n),t("setIsLoading",!1)}}));return function(e,i){return t.apply(this,arguments)}}(),setVisibleResults:function(){var t=a.a((function*({commit:t,state:i,dispatch:o},{query:a,size:r=E.a,offset:s=0,cacheSize:c=E.a,reset:l=!0,containerName:d,dataLayerInfo:u,isMobileDevice:m,fetchCacheSize:v=!0}){try{t("setIsLoading",!0),l&&o("resetResults",i.cachedResults.metadata);const e={query:a,size:r,offset:s,containerName:d,dataLayerInfo:u};if(!i.cachedResults.total){var p,h;const i=yield o("fetchSearchResults",e);var S;if(t("setSrpTitles",{title:null===(p=i.metadata)||void 0===p?void 0:p.title}),t("setBreadcrumbs",null!==(S=null===(h=i.metadata)||void 0===h?void 0:h.breadcrumbs)&&void 0!==S?S:{}),0===i.total)return t("setResults",i),void t("setIsLoading",!1);t("setCachedResults",i)}const E=i.cachedResults.items.length;if(!m&&E<r&&v){const a=yield o("fetchSearchResults",n.a({},e,{size:c,offset:E}));t("setCachedResults",{total:a.total,items:[...i.cachedResults.items,...a.items],metadata:i.cachedResults.metadata,sandbox:a.sandbox})}const{items:g,total:T,suggestions:I,metadata:R,sandbox:_}=i.cachedResults,y=null===R||void 0===R?void 0:R.title;var f;if(t("setResults",{total:T,items:g.slice(0,r),suggestions:I,metadata:R,sandbox:_}),t("setIsLoading",!1),!i.breadcrumbs)t("setBreadcrumbs",null!==(f=null===R||void 0===R?void 0:R.breadcrumbs)&&void 0!==f?f:{});i.srpTitles.title||t("setSrpTitles",{title:y})}catch(g){return e("search/setVisibleResults",g),void t("setIsLoading",!1)}}));return function(e,i){return t.apply(this,arguments)}}(),fetchFilters:function(){var i=a.a((function*({commit:i,rootGetters:o,state:a},{query:r}){try{const e=a.filtersPerformance,c=o["availability/dates"],l=Number(null===r||void 0===r?void 0:r.searchSource),d=Object(s.c)(r,c,l);e.startFetch="undefined"!==typeof window?performance.now():Date.now();const u=yield t.fetchFilters(d);e.dataReceived="undefined"!==typeof window?performance.now():Date.now();const m=(null===u||void 0===u?void 0:u.facets)&&n.a({},u.facets)||{};return(null===m||void 0===m?void 0:m.activityType)?delete m.travelerCategory:null===m||void 0===m||delete m.activityType,i("setFilters",m),i("setFiltersPerformance",e),i("setFiltersMetadata",null===u||void 0===u?void 0:u.metadata),null===u||void 0===u?void 0:u.facets}catch(c){return e("Actions search/fetchFilters",c),{}}}));return function(t,e){return i.apply(this,arguments)}}(),fetchLocationData:function(){var e=a.a((function*({commit:e},i){return t.fetchLocationData(i).then(t=>{e("setLocationData",t);const{info:i}=t;return Object(l.b)(Object(d.b)(i)),t})}));return function(t,i){return e.apply(this,arguments)}}(),fetchLocationMetaData:function(){var e=a.a((function*({commit:e},i){try{const n=yield t.fetchLocationMetaData(i);var o;return e("setLocationMetadata",null!==(o=null===n||void 0===n?void 0:n.metadata)&&void 0!==o?o:{}),n}catch(n){return Promise.resolve()}}));return function(t,i){return e.apply(this,arguments)}}(),fetchCountryMetaData:function(){var e=a.a((function*({commit:e},i){try{const n=yield t.fetchCountryMetaData(i);var o;return e("setLocationMetadata",null!==(o=null===n||void 0===n?void 0:n.metadata)&&void 0!==o?o:{}),n}catch(n){return Promise.resolve()}}));return function(t,i){return e.apply(this,arguments)}}(),setFilterValues:(t,e)=>{const{filter:i,values:o}=e,a=n.a({},t.state.selectedFilters);if(o&&o.length){const t="locations"===i?o.filter(t=>{var e,i;return!t.includes(null===(e=u.a.locations)||void 0===e||null===(i=e.prefix)||void 0===i?void 0:i.country)}):o;a[i]=Array.from(new Set(t))}else delete a[i];t.commit("setSelectedFilters",a)},setSelectedFilters:({commit:t},e)=>{t("setSelectedFilters",e)},setCollections:({commit:t},e)=>{t("setCollections",e)},setActiveCollection:({commit:t},e)=>{t("setActiveCollection",e)},setConsistentFilters:({commit:t},e)=>{t("setConsistentFilters",e)},setSrpTitles:({commit:t},e)=>{t("setSrpTitles",e)},setBreadcrumbs:({commit:t},e)=>{t("setBreadcrumbs",e)},resetResults:({commit:t},e)=>{t("setCachedResults",{total:0,items:[],metadata:e,sandbox:{}}),t("setResults",{total:0,items:[],metadata:e,sandbox:{}}),t("setResultsCount",0)},pushToDataLayer({state:t},e){Object(l.b)(Object(c.b)(n.a({},e,{activities:t.results.items})))},setRequestId({state:t,commit:e},{requestId:i}){e("setRequestId",i||t.requestId)},clearFilter:({commit:t},e)=>{t("clearFilter",e)}}}var I,R={requestId:t=>t.requestId,results:t=>t.results,resultsCount:t=>t.resultsCount,breadcrumbs:t=>t.breadcrumbs,searchContext:t=>t.searchContext,filters:t=>t.filters,exposedFilters:t=>t.exposedFilters,filtersMetadata:t=>t.filtersMetadata,selectedFilters:t=>t.selectedFilters,isLoading:t=>t.isLoading,srpTitles:t=>t.srpTitles,locationMetadata:t=>t.locationMetadata,locationData:t=>t.locationData,filtersCount(t){var e;return Object.keys(t.selectedFilters).reduce((i,o)=>{var n;return i+(null!==(e=null===(n=t.selectedFilters[o])||void 0===n?void 0:n.length)&&void 0!==e?e:0)},0)},sorting:t=>t.sorting,collections:t=>t.collections,activeCollection:t=>t.activeCollection,consistentFilters:t=>t.consistentFilters,filtersPerformance:t=>t.filtersPerformance,searchId:t=>{var e;return null!==(I=null===(e=t.results.metadata)||void 0===e?void 0:e.searchId)&&void 0!==I?I:""},enterLocationActivities:t=>t.enterLocationActivities,outsideLocationActivities:t=>t.outsideLocationActivities},_={setSearchContext:(t,e)=>{t.searchContext=e},setExposedFilters:(t,e)=>{t.exposedFilters=e},setFilters:(t,e)=>{t.filters=e},setFiltersMetadata:(t,e)=>{t.filtersMetadata=e},setLocationData:(t,e)=>{t.locationData=e},setLocationMetadata:(t,e)=>{t.locationMetadata=e},setSelectedFilters:(t,e)=>{t.selectedFilters=e},setIsLoading:(t,e)=>{t.isLoading=e},setCachedResults:(t,e)=>{t.cachedResults=e},setResults:(t,e)=>{t.results=e,t.resultsCount=e.total},setResultsCount:(t,e)=>{t.resultsCount=e},setBreadcrumbs:(t,e)=>{t.breadcrumbs=e},setSorting:(t,e)=>{t.sorting=e},setRequestId:(t,e)=>{t.requestId=e},setCollections:(t,e)=>{t.collections=e},setActiveCollection:(t,e)=>{t.activeCollection=e},setConsistentFilters:(t,e)=>{t.consistentFilters=e},setSrpTitles:(t,e)=>{t.srpTitles=e},setFiltersPerformance:(t,e)=>{t.filtersPerformance=e},clearFilter:(t,e)=>{const i=t.selectedFilters;delete i[e],t.selectedFilters=i},setEnterLocationActivities:(t,e)=>{t.enterLocationActivities=e},setOutsideLocationActivities:(t,e)=>{t.outsideLocationActivities=e}};const y=()=>({requestId:void 0,results:{total:0,items:[],suggestions:[]},resultsCount:0,breadcrumbs:{values:[]},cachedResults:{total:0,items:[]},isLoading:!1,srpTitles:{},searchContext:void 0,filters:{},exposedFilters:{},filtersMetadata:{},selectedFilters:{},sorting:{sortBy:"popularity",sortOrder:null},locationData:[],locationMetadata:{},collections:{},activeCollection:"",consistentFilters:{locations:[]},filtersPerformance:{startFetch:0,dataReceived:0,rendered:0},enterLocationActivities:{},outsideLocationActivities:{}});function A(t){return{namespaced:!0,state:y,actions:T(new o.a(t)),getters:R,mutations:_}}},213:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var o,n,a=i(6);function r(t){return{fetchTranslations:function(){var e=a.a((function*({commit:e},{keys:i,locale:n}){const a={};return i.forEach(e=>{(null===t||void 0===t?void 0:t[n])&&(a[e]=t[n][e])}),e(o.SET_TRANSLATION_DATA,{locale:n,values:a}),Promise.resolve(a)}));return function(t,i){return e.apply(this,arguments)}}()}}!function(t){t.SET_TRANSLATION_DATA="SET_TRANSLATION_DATA"}(o||(o={}));var s={getByLocale:t=>(e,i)=>{var o;return null!==(n=null===(o=t.translations[e])||void 0===o?void 0:o[i])&&void 0!==n?n:""}},c=i(9),l={[o.SET_TRANSLATION_DATA](t,e){const{locale:i,values:o}=e;t.translations[i]=c.a({},t.translations[i],o)}};const d=()=>({translations:{}});function u(t){return{namespaced:!0,state:d,actions:r(t),getters:s,mutations:l}}},214:function(t,e,i){"use strict";i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return d}));var o=i(99),n=i(6),a=i(9);var r={history:t=>t.history,suggestions:t=>t.suggestions},s={setSuggestions:(t,e)=>{t.suggestions=e},initialiseHistory:t=>{if(localStorage.getItem(c)){const e=JSON.parse(localStorage.getItem(c)),i=[],o=e.reduce((t,e)=>{if((null===e||void 0===e?void 0:e.locationType)&&((null===e||void 0===e?void 0:e.locationId)||(null===e||void 0===e?void 0:e.countryId))){const o=null===e||void 0===e?void 0:e.suggestion;if(!i.includes(o))return i.push(o),[...t,e]}return t},[]);e.length!==o.length&&localStorage.setItem(c,JSON.stringify(o)),t.history=o}},setHistory:(t,e)=>{t.history=e},clearHistory:t=>{t.history=[]}};const c="gyg-search-history",l=()=>({suggestions:{suggestions:[],searchAction:{onSearchLink:{}},seeAll:{onClickLink:{}}},history:[]});function d(t){return{namespaced:!0,state:l,actions:(e=new o.a(t),{fetchSuggestions:function(){var t=n.a((function*({commit:t},i){return e.fetchSuggestions(i.searchTerm,i.size,i.autocompleteContext).then(e=>{let o=(null===e||void 0===e?void 0:e.suggestions)?null===e||void 0===e?void 0:e.suggestions:[];(null===i||void 0===i?void 0:i.locationType)&&(o=o.filter(t=>t.locationType===i.locationType));const n={suggestions:o.slice(0,10).map((t,e)=>a.a({},t,{position:e+1})),searchAction:e.searchAction,seeAll:e.seeAll};return t("setSuggestions",n),n})}));return function(e,i){return t.apply(this,arguments)}}(),addToHistory:({commit:t,state:e},i)=>{let o=e.history;o.unshift({suggestion:i.suggestion,suggestionId:i.suggestionId,picture:i.picture,subTypeGroup:i.subTypeGroup,locationType:i.locationType,locationId:i.locationId,countryId:i.countryId,onClickLink:i.onClickLink});const n=[];o=o.reduce((t,e)=>n.includes(e.suggestion)?t:(n.push(e.suggestion),[...t,e]),[]);const a=o.slice(0,10);localStorage.setItem(c,JSON.stringify(a)),t("setHistory",a)},updateHistoryItem:({commit:t,state:e},{newSuggestion:i,index:o})=>{const{history:n}=e;let r=[...n];r[o]=a.a({},n[o],i),localStorage.setItem(c,JSON.stringify(r)),t("setHistory",r)},removeHistoryByIndex:({commit:t,state:e},i)=>{const{history:o}=e;o.splice(i,1),localStorage.setItem(c,JSON.stringify(o)),t("setHistory",o)},clearHistory:({commit:t})=>{localStorage.setItem(c,"[]"),t("clearHistory")}}),getters:r,mutations:s};var e}},215:function(t,e,i){"use strict";var o=i(4),n=()=>({errors:[],facebookData:{},hasRequestedLoginAction:!1,isLoading:!1,isLoggedIn:!1,customer:{id:null,displayName:"",firstName:void 0,lastName:void 0},providerData:{oldEmail:void 0,providers:void 0,email:void 0,error:void 0},revalidateSession:!1}),a={firstName:t=>t.customer.firstName,customerId:t=>t.customer.id,isLoggedIn:t=>t.isLoggedIn,getProviderData:t=>t.providerData},r=i(8),s=i(52),c={[r.a.SET_LOADING_STATE](t,e){t.isLoading=!!e},[r.a.SET_LOGIN_TENTATIVE](t,e=!0){t.hasRequestedLoginAction=!!e},[r.a.SET_IS_LOGGED_IN](t){t.isLoggedIn=!0},[r.a.SET_REVALIDATE_SESSION](t,e=!1){t.revalidateSession=e},[r.a.SET_IS_LOGGED_OUT](t){t.isLoggedIn=!1},[r.a.ADD_ERROR](t,e){t.errors.push(e)},[r.a.ADD_FACEBOOK_DATA](t,e){t.facebookData=e},[r.a.CLEAN_ERRORS](t){t.errors.splice(0,t.errors.length)},[r.a.SET_CUSTOMER_INFO](t,{id:e,displayName:i,firstName:o,lastName:n}){t.customer.id=e,t.customer.displayName=i,o||([o,n]=Object(s.a)(i)),t.customer.firstName=o,t.customer.lastName=n},[r.a.SET_PROVIDER_DATA](t,e){t.providerData=e}},l=i(144);e.a=t=>({namespaced:!0,state:n,getters:a,actions:Object(l.b)(new o.b(t)),mutations:c})},216:function(t,e,i){"use strict";i.d(e,"a",(function(){return m}));var o=i(106),n=i(6),a=i(9),r=i(23),s=i(33);var c,l={collection:t=>t.category,isLoading:t=>t.isLoading},d={setData:(t,e)=>{t.category=e},setIsLoading:(t,e)=>{t.isLoading=e}};!function(t){t.country="country",t.area="area",t.city="city",t.poi="poi"}(c||(c={}));const u=()=>({category:{},isLoading:!1});function m(t){return{namespaced:!0,state:u,actions:(e=new o.a(t),{fetchCategoryResults:function(){var t=n.a((function*({commit:t},{locationId:i,categoryId:o,allowCache:n}){const c=Object(r.a)(t);t("setIsLoading",!0);try{var l;const r=yield e.fetchCategoryResults(i,o,n),d=null===r||void 0===r||null===(l=r.data)||void 0===l?void 0:l.info;if(!d)return c("setHasError",!0),{};t("setData",d);const u=a.a({},d,{abstract:"",images:[]});return c("setTrackingData",Object(s.b)(u)),t("setIsLoading",!1),d}catch(d){throw c("setHasError",!0),d}}));return function(e,i){return t.apply(this,arguments)}}()}),getters:l,mutations:d};var e}},217:function(t,e,i){"use strict";i.d(e,"a",(function(){return E}));var o=i(6),n=i(14),a=i(3),r=i(27);function s(t,e){return{validateOffer:function(){var e=o.a((function*({commit:e}){e("SET_VIASAT_OFFER_BANNER",Boolean(t.get("viasatInteractionId")))}));return function(t){return e.apply(this,arguments)}}(),redirectVisitor:function(){var i=o.a((function*({getters:i,rootGetters:o},{offerInteractionId:s,airportcodes:c}){var l,d,u;n.a.increment("viasat.redirect_user");const m=null===(l=o["context/partnerSession"])||void 0===l?void 0:l.cmp,v=t=>{if(!m)return t;try{const e=new URL(t,o["context/currentUrl"]);return e.searchParams.append("cmp",m),e.pathname+e.search}catch(e){return a.a.error({offerInteractionId:s,error:e,partnerHash:p,cmpParam:m,url:t,currentUrl:o["context/currentUrl"]},"[Viasat]: error while adding cmp param to url"),t}},E=v("/");if(!i.isViasatPartner||!s)return t.expire("viasatInteractionId"),Promise.reject(new r.a(E,302));const p=null===(d=o["context/partnerSession"])||void 0===d?void 0:d.partnerHash;let h;t.set("viasatInteractionId",s,{maxAge:43200});try{h=yield e.fetchOfferInteractionDetails(s)}catch(g){return a.a.error({offerInteractionId:s,error:g,partnerHash:p},"[Viasat]: error during fetching offer details"),Promise.reject(new r.a(E,302))}const S=null===(u=h.locationData)||void 0===u?void 0:u.destinationICAO;if(!S)return a.a.error({offerInteractionId:s,partnerHash:p},"[Viasat]: destination ICAO code is missing"),Promise.reject(new r.a(E,302));const f=c[S];if(!f)return a.a.error({offerInteractionId:s,partnerHash:p,destinationIATA:f},"[Viasat]: destination ICAO has no IATA code pair"),Promise.reject(new r.a(E,302));return v("/s/?q=iata:"+f)}));return function(t,e){return i.apply(this,arguments)}}(),activateViasatOffer:function(){var i=o.a((function*({commit:i,getters:o,rootGetters:n}){const a=t.get("viasatInteractionId");if(a&&o.isViasatPartner)try{var r;const t=n["confirmation/confirmationData"];if(!t)return;const{totalPrice:o,shoppingCartHash:s,status:c}=t.shoppingCart,l={totalPrice:o,shoppingCartHash:s,status:c},d=null===(r=n["context/partnerSession"])||void 0===r?void 0:r.partnerHash;if(!(yield e.isValidOffer(d,l.totalPrice.currencyIsoCode,s,l.totalPrice.amount)))return void i("SET_VIASAT_OFFER_BANNER",!1);const u={cpaAmount:0,cpaCurrency:"USD",txnAmountGross:l.totalPrice.amount,txnCurrency:l.totalPrice.currencyIsoCode,commissionAmount:.11*l.totalPrice.amount,commissionCurrency:l.totalPrice.currencyIsoCode,commissionPercent:11,txnSponsorId:l.shoppingCartHash};i("SET_VIASAT_REDIRECTION_URL",yield e.activateOffer(a,u)),i("SET_VIASAT_OFFER_BANNER",!0)}catch(s){i("SET_VIASAT_OFFER_BANNER",!1)}}));return function(t){return i.apply(this,arguments)}}()}}var c={SET_VIASAT_REDIRECTION_URL(t,e){t.viasatRedirectionUrl=e},SET_VIASAT_OFFER_BANNER(t,e){t.showViasatOfferBanner=e}},l=i(183),d=i(24),u={bannerColor:(t,e,i,o)=>o["partnerCustomizations/headerBgColor"]||"#0B2443",viasatRedirectionUrl:t=>t.viasatRedirectionUrl,isViasatPartner:(t,e,i,o)=>{var n;const a=null===(n=o["context/partnerSession"])||void 0===n?void 0:n.partnerHash;return a&&Object(l.a)(a)},showViasatOfferBanner:(t,e)=>e.isViasatPartner&&t.showViasatOfferBanner,allowedPaymentMethods:(t,e)=>e.isViasatPartner?[d.b.paypal,d.b.creditcard,d.b.none]:[]},m=i(223);const v=()=>({viasatRedirectionUrl:null,showViasatOfferBanner:!1});function E(t,e,i){return{namespaced:!0,state:v,getters:u,mutations:c,actions:s(e,new m.a(t,i))}}},218:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o={mapsApiLoaded:t=>t.mapsApiLoaded},n={SET_MAPS_API_LOADED(t,e){t.mapsApiLoaded=e}};const a=()=>({mapsApiLoaded:!1});function r(){return{namespaced:!0,state:a,getters:o,mutations:n}}},219:function(t,e,i){"use strict";var o=i(6),n=i(174),a=i(94),r=i(141),s=i(79),c=["CD951","DEF9D","C0B32","3F441"],l=i(19),d=i(88),u=i(131);const{SET_CUSTOMIZATIONS:m}=a.a,v=()=>({customizations:void 0});var E,p,h,S,f,g,T,I,R,_,y,A,O,C,L,D,N,b,w,P,M,U,F,k,H,G,x;const B={hash:t=>{var e;return null!==(E=null===(e=t.customizations)||void 0===e?void 0:e.partner_hash)&&void 0!==E?E:""},buttonColor:t=>{var e;return null!==(p=null===(e=t.customizations)||void 0===e?void 0:e.button_color)&&void 0!==p?p:""},headerBgColor:t=>{var e;return null!==(h=null===(e=t.customizations)||void 0===e?void 0:e.header_bg_color)&&void 0!==h?h:""},headerLayout:t=>{var e;return null!==(S=null===(e=t.customizations)||void 0===e?void 0:e.header_layout)&&void 0!==S?S:a.b.Left},displayHeader:t=>{var e;return null===(f=null===(e=t.customizations)||void 0===e?void 0:e.display_header)||void 0===f||f},imageURL:t=>{var e;return null!==(g=null===(e=t.customizations)||void 0===e?void 0:e.image_url)&&void 0!==g?g:""},homepageURL:t=>{var e;return null!==(T=null===(e=t.customizations)||void 0===e?void 0:e.homepage_url)&&void 0!==T?T:""},brandName:t=>{var e;return null!==(I=null===(e=t.customizations)||void 0===e?void 0:e.brand_name)&&void 0!==I?I:""},displayLoginSignUp:t=>{var e;return null===(R=null===(e=t.customizations)||void 0===e?void 0:e.display_login_signup)||void 0===R||R},displayWishlist:t=>{var e;return null===(_=null===(e=t.customizations)||void 0===e?void 0:e.display_wishlist)||void 0===_||_},displayWishlistButtonOnCards:t=>{var e;return null===(y=null===(e=t.customizations)||void 0===e?void 0:e.display_wishlist_button_on_cards)||void 0===y||y},displayCart:t=>{var e;return null===(A=null===(e=t.customizations)||void 0===e?void 0:e.display_cart)||void 0===A||A},displayNewsletterSignup:t=>{var e;return null===(O=null===(e=t.customizations)||void 0===e?void 0:e.display_newsletter_signup)||void 0===O||O},backToHomeText:t=>{var e;return null!==(C=null===(e=t.customizations)||void 0===e?void 0:e.back_to_home_text)&&void 0!==C?C:""},backToHomeColor:t=>{var e;return null!==(L=null===(e=t.customizations)||void 0===e?void 0:e.back_to_home_color)&&void 0!==L?L:""},footerNotification:t=>{var e;return null!==(D=null===(e=t.customizations)||void 0===e?void 0:e.footer_notification_gettext_key)&&void 0!==D?D:""},footerNotificationDismissible:t=>{var e;return null===(N=null===(e=t.customizations)||void 0===e?void 0:e.footer_notification_dismissable)||void 0===N||N},headerNotification:t=>{var e;return null!==(b=null===(e=t.customizations)||void 0===e?void 0:e.header_notification_gettext_key)&&void 0!==b?b:""},headerNotificationDismissible:t=>{var e;return null===(w=null===(e=t.customizations)||void 0===e?void 0:e.header_notification_dismissable)||void 0===w||w},loyaltyProgramIdentifier:function(t){var e,i,o;const n=null!==(o=null===(e=t.customizations)||void 0===e?void 0:e.loyalty_program_identifier)&&void 0!==o?o:"";var a;const r=null!==(a=null===(i=t.customizations)||void 0===i?void 0:i.partner_hash)&&void 0!==a?a:"";return s.a.includes(r)?r:n},searchBgColor:t=>{var e;return null!==(P=null===(e=t.customizations)||void 0===e?void 0:e.search_background_color)&&void 0!==P?P:null},displayGygLogo:t=>{var e;return null===(M=null===(e=t.customizations)||void 0===e?void 0:e.display_gyg_logo)||void 0===M||M},excludedCategories:t=>{var e,i;return null!==(U=null===(e=t.customizations)||void 0===e||null===(i=e.excluded_categories)||void 0===i?void 0:i.split(",").map(t=>t.trim()).filter(Boolean))&&void 0!==U?U:[]},excludedTours:t=>{var e,i;return null!==(F=null===(e=t.customizations)||void 0===e||null===(i=e.excluded_tours)||void 0===i?void 0:i.split(",").map(t=>t.trim()).filter(Boolean))&&void 0!==F?F:[]},displayCustomFooter:t=>{var e;return null!==(k=null===(e=t.customizations)||void 0===e?void 0:e.display_custom_footer)&&void 0!==k&&k},footerBackgroundColor:t=>{var e;return null!==(H=null===(e=t.customizations)||void 0===e?void 0:e.footer_background_color)&&void 0!==H?H:null},displayAppCallout:t=>{var e;return null===(G=null===(e=t.customizations)||void 0===e?void 0:e.display_app_callout)||void 0===G||G},customHomepagePath:t=>{var e;return null!==(x=null===(e=t.customizations)||void 0===e?void 0:e.custom_homepage_path)&&void 0!==x?x:null},isEmirates:t=>{var e;return(null===(e=t.customizations)||void 0===e?void 0:e.partner_hash)===s.d},isAmexPartnerCustomization:t=>{var e;return(null===(e=t.customizations)||void 0===e?void 0:e.partner_hash)===r.a}},j=t=>({fetchCustomizations:function(){var e=o.a((function*({commit:e,rootState:i},o){if(c.includes(o.toUpperCase()))e(m,void 0);else{e(m,{partner_hash:o});try{const n=yield t.getCustomization(o),{data:a}=n;if(Object(u.b)(o)){const t=Object(l.c)(i,d.e,"B");e(m,t?Object(u.a)(a):a)}else e(m,a)}catch(n){e(m,void 0)}}}));return function(t,i){return e.apply(this,arguments)}}()}),V={[m](t,e){t.customizations=e}};e.a=t=>({namespaced:!0,state:v,getters:B,actions:j(new n.a(t)),mutations:V})},220:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var o=i(30),n=i(36);var a={["isTripItemNavigationActive"]:t=>t.isTripItemNavigationActive,["showTripItemActivitiesSwimlane"]:t=>t.showTripItemActivitiesSwimlanes,["showTabbingContent"]:t=>t.showTabbingContent,["showPoiTripItemRecommendations"]:t=>t.showPoiTripItemRecommendations,["showTcTripItemRecommendations"]:t=>t.showTcTripItemRecommendations,["scrollOnDatesSelected"]:t=>t.scrollOnDatesSelected,["showNoodleHeader"]:t=>t.showNoodleHeader,["showCompanionContent"]:t=>t.showCompanionContent,["showMerchUniqueSwimlane"]:t=>t.showMerchUniqueSwimlane,["showMerchUniqueSwimlaneMweb"]:t=>t.showMerchUniqueSwimlaneMweb};const r=()=>({isTripItemNavigationActive:!1,showTripItemActivitiesSwimlanes:!1,showTabbingContent:!1,scrollOnDatesSelected:!1,showPoiTripItemRecommendations:!1,showTcTripItemRecommendations:!1,showNoodleHeader:!1,showCompanionContent:!1,showMerchUniqueSwimlane:!1,showMerchUniqueSwimlaneMweb:!1});function s(){return{namespaced:!0,state:r,actions:Object(o.b)(),getters:a,mutations:n.b}}},221:function(t,e,i){"use strict";var o=i(6),n=i(2),a=i(3);class r{createAppLink(t){var e=this;return o.a((function*(){try{const i=yield e._httpClient.post(new n.b("travelers-api.create-app-link"),t);return null===i||void 0===i?void 0:i.data}catch(o){var i;return a.a.error({error:o},"Send App Link failed at service level"),null===o||void 0===o||null===(i=o.response)||void 0===i?void 0:i.data}}))()}getAttributionLinks({component:t,pageType:e,platform:i,partnerId:r,activityId:s,locationId:c}){var l=this;return o.a((function*(){try{return(yield l._httpClient.get(new n.b("travelers-api.get-attribution-links",{searchString:`?component=${t}&pageType=${e}&platform=${i}&partnerId=${r||""}${s?"&activityId="+s:""}${c?"&locationId="+c:""}`}))).data}catch(o){return a.a.error({error:o},"Fetch attribution links for app stores failed"),{android:"https://play.google.com/store/apps/details?id=com.getyourguide.android&hl=en&gl=US",ios:"https://apps.apple.com/us/app/getyourguide-tours-tickets/id705079381"}}}))()}getAppRating(){var t=this;return o.a((function*(){return(yield t._httpClient.get(new n.b("travelers-api.get-app-rating"))).data}))()}constructor(t){this._httpClient=t}}const s={success:t=>t.success,message:t=>t.message,iosRating:t=>t.iosRating,androidRating:t=>t.androidRating},c={SET_SUCCESS(t,e){t.success=e},CONFIRMATION_MESSAGE(t,e){t.message=e},SET_ANDROID_RATING(t,e){t.androidRating=e},SET_IOS_RATING(t,e){t.iosRating=e}};e.a=t=>{return{namespaced:!0,state:()=>({success:!1,message:"",iosRating:{averageRating:0,totalCount:0},androidRating:{averageRating:0,totalCount:0}}),actions:(e=new r(t),{sendAppLink:({commit:t},i)=>o.a((function*(){const o=Object.fromEntries(Object.entries(i).filter(t=>t[1])),n=yield e.createAppLink(o);t("CONFIRMATION_MESSAGE",n.message),t("SET_SUCCESS",200===n.status)}))(),getAttributionLinks:(t,i)=>o.a((function*(){return yield e.getAttributionLinks(i)}))(),getAppsRating:({commit:t})=>o.a((function*(){const i=yield e.getAppRating();t("SET_ANDROID_RATING",i.android),t("SET_IOS_RATING",i.ios)}))()}),getters:s,mutations:c};var e}},23:function(t,e,i){"use strict";function o(t){return(...e)=>"string"===typeof e[0]?t(e[0],e[1]||null,{root:!0}):t(e[0],{root:!0})}i.d(e,"a",(function(){return o}))},30:function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),i.d(e,"c",(function(){return d})),i.d(e,"b",(function(){return u}));var o=i(9),n=i(19),a=i(18),r=i(36),s=i(22),c=i(182);const l=o.a({},r.a);function d(t){return"locationExperiments/"+t}function u(){return{[l.setIsTripItemNavigationActive]:({commit:t},{locationDataInfo:e,locationOverview:i})=>{let o=!1;return!(null===e||void 0===e?void 0:e.isTripItem)||(null===e||void 0===e?void 0:e.isCategory)?o=!1:Object.keys(i||{}).length>1&&(o=!0),t(r.a.setIsTripItemNavigationActive,o),o},[l.setShowTripItemActivitiesSwimlane]:({commit:t,rootState:e},{locationDataInfo:i})=>{const o=(null===i||void 0===i?void 0:i.isTripItem)&&!(null===i||void 0===i?void 0:i.categoryId)&&s.k.includes(null===i||void 0===i?void 0:i.id);return Boolean(o&&t(r.a.setShowTripItemActivitiesSwimlane,Object(n.c)(e,a.n,"B")))},[l.setShowTabbingContent]:({commit:t,rootState:e},{locationDataInfo:i})=>{const o=(null===i||void 0===i?void 0:i.isCity)||(null===i||void 0===i?void 0:i.isNeighborhood)||(null===i||void 0===i?void 0:i.isAreaCurated)||(null===i||void 0===i?void 0:i.isPoiDestination);return Boolean(o&&t(r.a.setShowTabbingContent,Object(n.c)(e,a.i,"B")))},[l.setScrollOnDatesSelected]:({commit:t,rootState:e},{locationDataInfo:i})=>{const o=(null===i||void 0===i?void 0:i.isCountry)||(null===i||void 0===i?void 0:i.isAreaCurated)||(null===i||void 0===i?void 0:i.isCity)||(null===i||void 0===i?void 0:i.isNeighborhood)||(null===i||void 0===i?void 0:i.isPoiDestination);return Boolean(o&&t(r.a.setScrollOnDatesSelected,Object(n.c)(e,a.d,"B")))},[l.setShowPoiTripItemRecommendations]:({commit:t,rootState:e},{locationDataInfo:i,searchResultsCount:o})=>{const s=o&&o>0&&o<=8&&(null===i||void 0===i?void 0:i.isPoi)&&(null===i||void 0===i?void 0:i.isTripItem),c=Boolean(s&&Object(n.c)(e,a.u,"B"));return c&&t(r.a.setShowPoiTripItemRecommendations,Object(n.c)(e,a.u,"B")),c},[l.setShowTcTripItemRecommendations]:({commit:t,rootState:e},{locationDataInfo:i,searchResultsCount:o})=>{const s=o&&o>0&&o<=8&&(null===i||void 0===i?void 0:i.isCategory),c=Boolean(s&&Object(n.c)(e,a.v,"B"));return c&&t(r.a.setShowTcTripItemRecommendations,c),c},[l.setShowNoodleHeader]:({commit:t,rootState:e},{locationDataInfo:i})=>{const o=!!i&&i.usesDynamicTemplate;return o&&t(r.a.setShowNoodleHeader,Object(n.c)(e,a.h,"B")),o},[l.setShowCompanionContent]:({commit:t,rootState:e},{locationDataInfo:i})=>{var o;const l=null===(o=e.context)||void 0===o?void 0:o.locale,d=null===i||void 0===i?void 0:i.id,u=null===i||void 0===i?void 0:i.isCategory,m=null===i||void 0===i?void 0:i.isCity,v=["en-AU","en-GB","en-US"].includes(l)&&d&&s.f.includes(d)&&c.a[""+d]&&m&&!u;return Boolean(v&&t(r.a.setShowCompanionContent,Object(n.c)(e,a.c,"B")))},[l.setShowMerchUniqueSwimlane]:({commit:t,rootState:e},{locationDataInfo:i})=>{var o;const c=null===i||void 0===i?void 0:i.id,l=null===(o=e.context)||void 0===o?void 0:o.isMobileDevice,d=(null===i||void 0===i?void 0:i.isCity)&&!(null===i||void 0===i?void 0:i.isCategory)&&!l&&c&&c in s.i;return Boolean(d&&t(r.a.setShowMerchUniqueSwimlane,Object(n.c)(e,a.e,"B")))},[l.setShowMerchUniqueSwimlaneMweb]:({commit:t,rootState:e},{locationDataInfo:i})=>{var o;const c=null===i||void 0===i?void 0:i.id,l=null===(o=e.context)||void 0===o?void 0:o.isMobileDevice,d=(null===i||void 0===i?void 0:i.isCity)&&!(null===i||void 0===i?void 0:i.isCategory)&&l&&c&&c in s.i;return Boolean(d&&t(r.a.setShowMerchUniqueSwimlaneMweb,Object(n.c)(e,a.f,"B")))}}}},35:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return s}));var o=i(9),n=i(78);const a=t=>{var e,i,o,a,r,s,c,l,d;const{activity:u}=t;var m,v,E,p,h,S,f,g,T,I,R,_;return{uuid:t.uuid,id:u.id,abstract:u.abstract,activityType:u.activityType,url:u.url,category:u.category,attributes:u.attributes,title:null!==(m=u.title)&&void 0!==m?m:"",availability:u.availability?{message:"",nextAvailableDateTime:"",type:"",metadata:{key:"",spots:"",pattern:""}}:null,flags:{},photos:[{urls:[{size:"medium",url:Object(n.b)(u.pictureUrl,"68")}],verticalAlignment:"",copyright:null}],reviewStatistics:{quantity:u.reviewCount,rating:u.overallRating},reviews:{totalCount:null!==(v=u.reviewCount)&&void 0!==v?v:0,averageRating:null!==(E=u.overallRating)&&void 0!==E?E:0},price:{priceCategoryLabel:null!==(p=null===(e=u.price)||void 0===e?void 0:e.priceCategoryLabel)&&void 0!==p?p:"",basePrice:null!==(h=null===(i=u.price)||void 0===i?void 0:i.currentPrice)&&void 0!==h?h:0,currency:null!==(S=null===(o=u.price)||void 0===o?void 0:o.currency)&&void 0!==S?S:"",priceCategory:null!==(f=null===(a=u.price)||void 0===a?void 0:a.currency)&&void 0!==f?f:"",startingPrice:null!==(g=null===(r=u.price)||void 0===r?void 0:r.originalPrice)&&void 0!==g?g:0,formattedStartingPrice:null!==(T=null===(s=u.price)||void 0===s?void 0:s.displayCurrentPrice)&&void 0!==T?T:"",formattedBasePrice:null!==(I=null===(c=u.price)||void 0===c?void 0:c.displayOriginalPrice)&&void 0!==I?I:"",currencySymbol:null!==(R=null===(l=u.price)||void 0===l?void 0:l.currency)&&void 0!==R?R:"",discountPercentage:null!==(_=null===(d=u.price)||void 0===d?void 0:d.discountPercentageValue)&&void 0!==_?_:""},basePrice:u.basePrice,actualPrice:u.actualPrice,type:"",duration:{},validity:{},categoryLabel:u.categoryLabel}},r=({lists:t})=>t.map(t=>s(t)).sort((t,e)=>{var i;return t.updateDate&&e.updateDate?Math.abs(e.updateDate.getTime())-(null===(i=t.updateDate)||void 0===i?void 0:i.getTime()):0}),s=t=>o.a({id:t.uuid,title:t.name,updateDate:new Date(t.updateTimestamp),startingDate:t.fromDate?new Date(t.fromDate).getTime():0,endingDate:t.toDate?new Date(t.toDate).getTime():0,images:t.pictureUrls?t.pictureUrls.filter(t=>!t.includes("location//")).slice(0,3):[],locationIds:t.locations&&t.locations.length>0?t.locations.map(t=>t.id):[],activities:t.items.map(t=>a(t))},t)},36:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));const o={setIsNavRedirectionActive:"setIsNavRedirectionActive",setIsTripItemNavigationActive:"setIsTripItemNavigationActive",setShowTripItemActivitiesSwimlane:"setShowTripItemActivitiesSwimlane",setShowTabbingContent:"setShowTabbingContent",setScrollOnDatesSelected:"setScrollOnDatesSelected",setShowPoiTripItemRecommendations:"setShowPoiTripItemRecommendations",setShowTcTripItemRecommendations:"setShowTcTripItemRecommendations",setShowNoodleHeader:"setShowNoodleHeader",setShowCompanionContent:"setShowCompanionContent",setShowMerchUniqueSwimlane:"setShowMerchUniqueSwimlane",setShowMerchUniqueSwimlaneMweb:"setShowMerchUniqueSwimlaneMweb"};e.b={[o.setIsTripItemNavigationActive]:(t,e)=>{t.isTripItemNavigationActive=e},[o.setShowTabbingContent]:(t,e)=>{t.showTabbingContent=e},[o.setShowTripItemActivitiesSwimlane]:(t,e)=>{t.showTripItemActivitiesSwimlanes=e},[o.setShowPoiTripItemRecommendations]:(t,e)=>{t.showPoiTripItemRecommendations=e},[o.setShowTcTripItemRecommendations]:(t,e)=>{t.showTcTripItemRecommendations=e},[o.setScrollOnDatesSelected]:(t,e)=>{t.scrollOnDatesSelected=e},[o.setShowNoodleHeader]:(t,e)=>{t.showNoodleHeader=e},[o.setShowCompanionContent]:(t,e)=>{t.showCompanionContent=e},[o.setShowMerchUniqueSwimlane]:(t,e)=>{t.showMerchUniqueSwimlane=e},[o.setShowMerchUniqueSwimlaneMweb]:(t,e)=>{t.showMerchUniqueSwimlaneMweb=e}}},55:function(t,e,i){"use strict";var o;i.d(e,"a",(function(){return o})),function(t){t[t.None=0]="None",t[t.CustomerEngagementPromotion=1]="CustomerEngagementPromotion",t[t.PartnerPromotion=2]="PartnerPromotion"}(o||(o={}))},79:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return d})),i.d(e,"f",(function(){return u})),i.d(e,"g",(function(){return m})),i.d(e,"a",(function(){return v})),i.d(e,"h",(function(){return p}));var o=i(6);var n={amounts:t=>t.amounts},a={UPDATE_LOYALTY_PROGRAM_AMOUNTS(t,e){const i=t.amounts,o=e.filter(t=>!i.find(e=>e.type===t.type&&e.resellerCampaign===t.resellerCampaign&&e.referenceAmount.currencyIsoCode===t.referenceAmount.currencyIsoCode&&e.referenceAmount.amount===t.referenceAmount.amount));t.amounts=[...i,...o]}},r=i(175);const s="LC9E9HS",c="A8VRWI7",l="0DAB4",d="RHGBNIQ",u="QYUBN2S",m="QDQYCSH",v=[l,"N1555BO",s,c,d,u,m],E=()=>({amounts:[]});function p(t){return{namespaced:!0,state:E,getters:n,mutations:a,actions:(e=new r.a(t),{fetchLoyaltyProgramAmounts:function(){var t=o.a((function*({state:t,commit:i},o){const{loyaltyProgramIdentifier:n,referenceAmounts:a,resellerCampaign:r}=o;if(n&&0!==a.filter(e=>!t.amounts.find(t=>t.type===n&&t.resellerCampaign===r&&t.referenceAmount.currencyIsoCode===e.currencyIsoCode&&t.referenceAmount.amount===e.amount)).length)try{i("UPDATE_LOYALTY_PROGRAM_AMOUNTS",yield e.fetchLoyaltyProgramAmounts(n,a,r))}catch(s){i("UPDATE_LOYALTY_PROGRAM_AMOUNTS",[])}}));return function(e,i){return t.apply(this,arguments)}}()})};var e}},8:function(t,e,i){"use strict";e.a={ADD_ERROR:"ADD_ERROR",ADD_FACEBOOK_DATA:"ADD_FACEBOOK_DATA",CLEAN_ERRORS:"CLEAN_ERRORS",SET_LOADING_STATE:"SET_LOADING_STATE",SET_LOGIN_TENTATIVE:"SET_LOGIN_TENTATIVE",SET_IS_LOGGED_IN:"SET_IS_LOGGED_IN",SET_IS_LOGGED_OUT:"SET_IS_LOGGED_OUT",SET_CUSTOMER_INFO:"SET_CUSTOMER_INFO",SET_PROVIDER_DATA:"SET_PROVIDER_DATA",SET_REVALIDATE_SESSION:"SET_REVALIDATE_SESSION"}},84:function(t,e,i){"use strict";i.d(e,"a",(function(){return g})),i.d(e,"c",(function(){return T})),i.d(e,"b",(function(){return I}));var o=i(6),n=i(9),a=i(29),r=i(20),s=i(22),c=i(33),l=i(12),d=i(23),u=4,m=i(46),v=i(121),E=i(34),p=i(3),h=i(73),S=i.n(h),f=i(13);const g={fetchActivityCards:"fetchActivityCards",fetchLocationData:"fetchLocationData",fetchRelatedTopLocations:"fetchRelatedTopLocations",fetchRelatedLocation:"fetchRelatedLocation",fetchLocationCollections:"fetchLocationCollections",fetchLocationCategoryNavigation:"fetchLocationCategoryNavigation",fetchAttractionTripItemsData:"fetchAttractionTripItemsData",fetchNearbyLocations:"fetchNearbyLocations",fetchNearbyActivities:"fetchNearbyActivities",fetchTripItems:"fetchTripItems",fetchGroupNavigation:"fetchGroupNavigation",setTopLocationsHeader:"setTopLocationsHeader",fetchLocationsOverview:"fetchLocationsOverview",fetchRecommendations:"fetchRecommendations",initializeCache:"initializeCache",setActiveTab:"setActiveTab",setEntryTab:"setEntryTab",fetchMerchUniqueCollection:"fetchMerchUniqueCollection"};function T(t){return"location/"+t}function I(t,e){const i=(t,e)=>{p.a.error({error:e},`Missing Location section: ${t}\n`)};return{[g.setActiveTab]:function(){var t=o.a((function*({commit:t},{activeTab:e}){return t(f.a.setActiveTab,e),null}));return function(e,i){return t.apply(this,arguments)}}(),[g.setEntryTab]:function(){var t=o.a((function*({commit:t},{entryTab:e}){return t(f.a.setEntryTab,e),null}));return function(e,i){return t.apply(this,arguments)}}(),[g.initializeCache]:function(){var t=o.a((function*({commit:t,rootState:e}){const{relatedTopLocations:i,attractionTripItemsData:o,tripItems:n,activitiesData:a,tripItemGroupNavigationItems:r,activeTab:s}=e.location,c={[v.a]:{}},l=s||v.a;null===r||void 0===r||r.forEach(t=>c[t.id.toString()]={});const d={relatedTopLocations:i,attractionTripItemsData:o,tripItems:n,activitiesData:a};return c[l]=d,t(f.a.setActiveTab,l),t(f.a.setInitialCacheState,c),null}));return function(e){return t.apply(this,arguments)}}(),[g.fetchActivityCards]:function(){var i=o.a((function*({commit:i,rootState:o},{locationId:a,locationToId:l,categoryId:u,locationType:m,searchParamsIds:v,dates:p,datesChanged:h=!1}){if(Object(r.a)(!h&&o.location,"activitiesData"))return null;const S=Object(d.a)(i);i(f.a.setIsLoading,!0);const g=o.context.isMobileDevice;var T;p=p||e.getAvailabilityDates(g),e.expireDateFromCookie();const{locationData:{parentLocations:I,category:R}}=null!==(T=null===o||void 0===o?void 0:o.location)&&void 0!==T?T:{};let _=R?I[0]:I[1];if(u===s.h.DAY_TRIPS_FROM||u===s.h.DAY_TRIPS_TO){const{url:t}=I[0];_={id:0,name:"",url:`${t}-tc${s.h.DAY_TRIPS}`}}const y=Object(E.a)(o.route.query);return _&&y.toString().length&&(_.url+=(-1===_.url.indexOf("?")?"?":"&")+y.toString()),t.fetchActivityCards(a,l,_,p,u,m,v).then(t=>{i(f.a.setActivitiesData,t),S("availability/setDates",p);const e=Object(c.d)(t.items);return S("setTrackingData",n.a({},o.trackingData&&o.trackingData,e)),i(f.a.setIsLoading,!1),t})}));return function(t,e){return i.apply(this,arguments)}}(),[g.fetchMerchUniqueCollection]:function(){var e=o.a((function*({commit:e,state:o},{locationId:n,locationType:a,searchParamsIds:c,categoryId:l}){if(!Object(r.a)(o,"merchUniqueCollection")&&l)try{var d;const i=yield t.fetchCollectionResults(n,l,a,s.b,void 0,c,void 0,void 0);e(f.a.setMerchUniqueCollection,null===i||void 0===i||null===(d=i.data)||void 0===d?void 0:d.collection)}catch(u){i("Merch Unique Collection",u)}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchLocationData]:function(){var e=o.a((function*({commit:e,rootState:o,dispatch:n},{locationId:a,categoryId:r,allowCache:u,locationToId:E}){const p=Object(d.a)(e);try{const i=yield t.fetchLocationData(a,r,u,E),{data:d}=i,{info:{parentId:m,type:x,isTripItem:B,parentLocations:j,category:V,numberOfActivities:W}}=d;if(!Number.isNaN(m)&&0===W){var h;const i=yield t.fetchLocationData(m),o=null===i||void 0===i||null===(h=i.data)||void 0===h?void 0:h.info;o&&e(f.a.setParentLocationData,o)}if(x===l.b.poi){const e=yield t.fetchLocationData(m),{data:{info:{images:i,headerLogos:o}}}=e;null===j||void 0===j||j.map(t=>{t.id===m&&(t.images=i,t.headerLogos=o)})}if(!V&&B&&(yield n(g.fetchLocationsOverview,{locationId:a})),Object(v.c)(o,null===d||void 0===d?void 0:d.info)){var S,T,I,R,_,y,A,O,C,L,D,N,b,w,P,M,U,F,k,H,G;if(Array.isArray(null===d||void 0===d||null===(S=d.info)||void 0===S||null===(T=S.galleryImages)||void 0===T?void 0:T[0]))d.info.galleryImages=null===d||void 0===d||null===(y=d.info)||void 0===y?void 0:y.galleryImages[0];if((null===d||void 0===d||null===(I=d.info)||void 0===I?void 0:I.galleryImages)&&0!==(null===d||void 0===d||null===(R=d.info)||void 0===R||null===(_=R.galleryImages)||void 0===_?void 0:_.length)){if(null===(A=d.info)||void 0===A||null===(O=A.images)||void 0===O||null===(C=O[0])||void 0===C||null===(L=C[1])||void 0===L?void 0:L.url)null===d||void 0===d||null===(D=d.info)||void 0===D||null===(N=D.galleryImages)||void 0===N||N.shift(),null===d||void 0===d||null===(b=d.info)||void 0===b||null===(w=b.galleryImages)||void 0===w||w.unshift({url:null===(P=d.info)||void 0===P||null===(M=P.images)||void 0===M||null===(U=M[0])||void 0===U?void 0:U[1].url})}else if(null===(F=d.info)||void 0===F||null===(k=F.images)||void 0===k||null===(H=k[0])||void 0===H?void 0:H[0])d.info.galleryImages=[null===(G=d.info)||void 0===G?void 0:G.images[0][0]];else d.info.galleryImages=[{type:"normal",url:s.e}]}return p("setTrackingData",Object(c.b)(d.info)),e(f.a.setLocationData,d.info),i}catch(B){var x;if(r)return i("MissingLocationCategoryData",B),null;throw i("MissingLocationData",B),new m.a({message:"",apiEndpoint:null===B||void 0===B||null===(x=B.request)||void 0===x?void 0:x.path})}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchRelatedTopLocations]:function(){var e=o.a((function*({commit:e,rootState:o},{locationId:s,excludeLocationId:c,limit:l,allowCache:d}){try{var u;if(Object(r.a)(o.location,"relatedTopLocations"))return null;const i=yield t.fetchRelatedTopLocations(s,c,l,d),m=Boolean(null===i||void 0===i||null===(u=i.relatedLocations)||void 0===u?void 0:u.items);let v=Object(a.e)(i.relatedLocations);return m||(v=n.a({},v,{items:i.relatedLocations})),e(f.a.setRelatedTopLocations,{topLocations:v}),e(f.a.setRelatedLocation,v.currentLocation),(null===i||void 0===i?void 0:i.rankingUuid)&&e(f.a.setTopSightsRankingUuid,null===i||void 0===i?void 0:i.rankingUuid),i}catch(m){return i("Top City Locations",m),{}}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchRelatedLocation]:function(){var e=o.a((function*({commit:e,state:o},{locationId:n}){if(Object(r.a)(o,"relatedLocation"))return null;const a=o.locationData;let s=a;if((null===a||void 0===a?void 0:a.id)!==n)try{var c;const e=yield t.fetchLocationData(n);var l;if(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.info)s=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.info}catch(d){i("Location banner location data",d)}return e(f.a.setRelatedLocation,s),{}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchLocationCollections]:function(){var e=o.a((function*({commit:e,rootState:i},{locationId:o,categoryId:n,locationType:a,activitiesLimit:r,dateFrom:s,dateTo:c}){try{var l;e(f.a.setIsLoading,!0);const m=5,v=5,{visitorId:E}=i.context,p=yield t.fetchLocationCollections({locationId:o,categoryId:n,locationType:a,activitiesLimit:r,limit:m,enrichCount:v,visitorId:E,dateFrom:s,dateTo:c});var d;const h=null!==(d=null===p||void 0===p||null===(l=p.collectionSet)||void 0===l?void 0:l.items)&&void 0!==d?d:[];var u;if(h.length)e(f.a.setCollections,{enrichedItems:h,uid:null===p||void 0===p||null===(u=p.collectionSet)||void 0===u?void 0:u.uid});return e(f.a.setIsLoading,!1),p}catch(m){return e(f.a.setCollections,{enrichedItems:[],uid:""}),e(f.a.setIsLoading,!1),{}}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchLocationCategoryNavigation]:function(){var e=o.a((function*({commit:e},{locationId:o}){try{const i=yield t.fetchLocationCategoryNavigation(o);return e(f.a.setCategoryNavigation,null===i||void 0===i?void 0:i.collectionSet),i}catch(n){return i("Location Category Navigation",n),{}}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchAttractionTripItemsData]:function(){var e=o.a((function*({commit:e,state:o},s){try{if(Object(r.a)(o,"attractionTripItemsData"))return null;if(s.locationIds.length){const i=yield t.fetchAttractionTripItemsData(s),o=((null===i||void 0===i?void 0:i.items)||[]).filter(t=>{var e;const i=(null===t||void 0===t||null===(e=t.photos)||void 0===e?void 0:e.length)&&Array.isArray(t.photos[0])?t.photos[0]:t.photos;return null===i||void 0===i?void 0:i.length}).map(t=>{var e;return n.a({},t,{url:t.url,photos:(null===t||void 0===t||null===(e=t.photos)||void 0===e?void 0:e.length)&&Array.isArray(t.photos[0])?t.photos[0]:t.photos})}),a={source:l.a.filters,items:o};return e(f.a.setAttractionTripItemsData,a),a}var c;const i=yield t.fetchRelatedTopLocations(s.locationId,s.locationId,null!==(c=s.limit)&&void 0!==c?c:12,!1,s.categoryId),u=Object(a.e)(i.relatedLocations);var d;const m=(null!==(d=u.items)&&void 0!==d?d:[]).map(t=>({id:t.id,type:t.type,title:t.title,url:t.url,numberOfActivities:t.numberOfActivities,photos:t.photos.map(t=>{var e,i;return{type:null!==(e=t.type)&&void 0!==e?e:"",url:null!==(i=t.url)&&void 0!==i?i:""}})})),v={source:l.a.relatedLocations,categoryId:s.categoryId,items:m};return e(f.a.setAttractionTripItemsData,v),(null===i||void 0===i?void 0:i.rankingUuid)&&e(f.a.setTopSightsRankingUuid,null===i||void 0===i?void 0:i.rankingUuid),v}catch(u){return i("Attraction Trip Items",u),{items:[]}}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchNearbyLocations]:function(){var e=o.a((function*({commit:e,state:o},{locationId:n,visitorId:a,locale:s,limit:c,locationType:l}){try{var d;if(Object(r.a)(o,"nearestLocations"))return null;const i=yield t.fetchNearbyLocations({locationId:n,visitorId:a,locale:s,limit:c,locationType:l});return e(f.a.setNearestLocations,null===i||void 0===i||null===(d=i.data)||void 0===d?void 0:d.data),i}catch(u){return i("Nearest Location API error",u),{}}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchNearbyActivities]:function(){var e=o.a((function*({commit:e,state:o,rootState:n},{limit:a=16,fromDate:r,toDate:s,page:c=1}){var l,d;const u={data:(null===(l=o.nearestActivity)||void 0===l?void 0:l.data)||[],isLoading:!1,isError:!1,total:(null===(d=o.nearestActivity)||void 0===d?void 0:d.total)||0};u.isLoading=!0,e(f.a.setNearestActivity,u);try{var m,v,E,p;const{location:{locationData:{id:i}},context:{visitorId:o,locale:l}}=n,d=yield t.fetchNearbyActivities({locationId:i,visitorId:o,locale:l,limit:a,page:c,fromDate:r,toDate:s}),h=null===d||void 0===d||null===(m=d.data)||void 0===m||null===(v=m.activities)||void 0===v?void 0:v.items,S=null===d||void 0===d||null===(E=d.data)||void 0===E||null===(p=E.activities)||void 0===p?void 0:p.total;return h?(u.data=h,S&&(u.total=S)):u.data=[],u.isLoading=!1,e(f.a.setNearestActivity,u),d}catch(h){return u.isError=!0,u.isLoading=!1,u.total=0,u.data=[],e(f.a.setNearestActivity,u),i("Nearest Activities API error",h),{}}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchTripItems]:function(){var e=o.a((function*({commit:e,state:o},{locationId:n,categoryId:a}){try{if(Object(r.a)(o,"tripItems"))return null;const i=yield t.fetchTripItems({locationId:n,categoryId:a});let s=(null===i||void 0===i?void 0:i.data.data)||[];return s=s.filter(t=>t.image),e(f.a.setTripItems,s.slice(0,18)),s}catch(c){if(i("Trip Items API error",c),S.a.isAxiosError(c)){var s;const t=c;return null===t||void 0===t||null===(s=t.response)||void 0===s?void 0:s.data}return c}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchGroupNavigation]:function(){var e=o.a((function*({commit:e},i){const o=yield t.fetchGroupNavigation(i);return e(f.a.setTripItemGroupNavigationItems,null===o||void 0===o?void 0:o.data.data),e(f.a.setTripItemGroupCategories,null===o||void 0===o?void 0:o.data.categories),null===o||void 0===o?void 0:o.data}));return function(t,i){return e.apply(this,arguments)}}(),[g.setTopLocationsHeader]:({commit:t},e)=>{t(f.a.setTopLocationsHeader,e)},[g.fetchLocationsOverview]:function(){var e=o.a((function*({commit:e},{locationId:o}){try{const i=yield t.fetchLocationsOverview(o);return e(f.a.setLocationOverview,(null===i||void 0===i?void 0:i.data)||{}),null===i||void 0===i?void 0:i.data}catch(a){if(i("Trip Items Location Overview API error",a),S.a.isAxiosError(a)){var n;const t=a;return null===t||void 0===t||null===(n=t.response)||void 0===n?void 0:n.data}return a}}));return function(t,i){return e.apply(this,arguments)}}(),[g.fetchRecommendations]:function(){var e=o.a((function*({commit:e,rootState:o},{activityId:n}){try{return t.fetchRecommendations(n).then(({data:{activityCards:t,metadata:i}})=>{var n,a,r;let s=[];const c=[];var l;null===o||void 0===o||null===(n=o.search)||void 0===n||null===(a=n.results)||void 0===a||null===(r=a.items)||void 0===r||r.forEach(t=>{c.push(null===t||void 0===t?void 0:t.id)}),Array.isArray(t)&&(s=null===t||void 0===t?void 0:t.filter(t=>!c.includes(null===t||void 0===t?void 0:t.id))),e(f.a.setRecommendations,{uuid:null!==(l=null===i||void 0===i?void 0:i.uuid)&&void 0!==l?l:"",items:null===s||void 0===s?void 0:s.slice(0,u),type:"similarity"}),s&&s.length>0&&e(f.a.setShowRecommendations,!0)}).catch(()=>{e(f.a.setRecommendations,{uuid:"",items:[],type:"similarity"})})}catch(r){if(i("Location Recommendations API error",r),S.a.isAxiosError(r)){var a;const t=r;return null===t||void 0===t||null===(a=t.response)||void 0===a?void 0:a.data}return r}}));return function(t,i){return e.apply(this,arguments)}}()}}}}]);
//# sourceMappingURL=commons-store.37aa3808.js.map